<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Теилим - תהילים</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Frank+Ruhl+Libre:wght@400;700&family=PT+Serif:wght@400;700&display=swap');
    
    :root {
      --primary: #4361ee;
      --primary-light: #4895ef;
      --primary-dark: #3a56d4;
      --background: #f8f9fa;
      --card: #ffffff;
      --text: #212529;
      --hebrew-text: #333;
      --text-light: #6c757d;
      --border: #dee2e6;
      --divine: #d4a017;
      --shadow-sm: 0 2px 8px rgba(0,0,0,0.05);
      --radius: 12px;
      --header-height: 60px;
      --bottom-nav-height: 65px;
      --hebrew-font: 'Frank Ruhl Libre', serif;
      --russian-font: 'PT Serif', serif;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      background-color: var(--background);
      color: var(--text);
      line-height: 1.5;
      font-size: 16px;
      padding-bottom: var(--bottom-nav-height);
      padding-top: var(--header-height);
    }
    
    .header {
      position: fixed;
      top: 0;
      right: 0;
      left: 0;
      height: var(--header-height);
      background-color: var(--card);
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 16px;
      box-shadow: var(--shadow-sm);
      z-index: 100;
    }
    
    .header-title {
      font-weight: 700;
      font-size: 18px;
    }
    
    .header-actions {
      display: flex;
      gap: 12px;
    }
    
    .icon-btn {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      background-color: var(--background);
      border: none;
      font-size: 18px;
      cursor: pointer;
    }
    
    .container {
      max-width: 800px;
      margin: 20px auto;
      padding: 0 16px;
    }
    
    .psalm-selector {
      background-color: var(--card);
      border-radius: var(--radius);
      padding: 16px;
      margin-bottom: 20px;
      box-shadow: var(--shadow-sm);
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    
    .psalm-number {
      font-size: 20px;
      font-weight: 700;
    }
    
    .psalm-navigation {
      display: flex;
      gap: 10px;
    }
    
    .nav-btn {
      padding: 8px 16px;
      border: none;
      border-radius: var(--radius);
      background-color: var(--primary);
      color: white;
      font-weight: 500;
      cursor: pointer;
    }
    
    .nav-btn:disabled {
      background-color: var(--text-light);
      cursor: not-allowed;
    }
    
    .psalm-card {
      background-color: var(--card);
      border-radius: var(--radius);
      padding: 24px;
      margin-bottom: 20px;
      box-shadow: var(--shadow-sm);
    }
    
    .psalm-title {
      font-size: 24px;
      font-weight: 700;
      margin-bottom: 16px;
      text-align: center;
    }
    
    .psalm-text {
      margin-bottom: 20px;
    }
    
    .verse {
      display: flex;
      flex-direction: column;
      margin-bottom: 16px;
    }
    
    .verse-number {
      font-weight: 700;
      font-size: 14px;
      color: var(--text-light);
      margin-bottom: 4px;
    }
    
    .russian-text {
      font-family: var(--russian-font);
      font-size: 18px;
      margin-bottom: 8px;
      line-height: 1.7;
    }
    
    .hebrew-text {
      font-family: var(--hebrew-font);
      font-size: 20px;
      line-height: 1.7;
      direction: rtl;
      color: var(--hebrew-text);
    }
    
    .psalm-actions {
      display: flex;
      justify-content: center;
      gap: 16px;
      margin-top: 24px;
    }
    
    .action-btn {
      padding: 10px 16px;
      border: none;
      border-radius: var(--radius);
      background-color: var(--background);
      color: var(--text);
      display: flex;
      align-items: center;
      gap: 8px;
      cursor: pointer;
    }
    
    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      height: var(--bottom-nav-height);
      background-color: var(--card);
      display: flex;
      justify-content: space-around;
      align-items: center;
      box-shadow: 0 -2px 8px rgba(0,0,0,0.08);
      z-index: 100;
    }
    
    .bottom-nav-item {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 4px;
      color: var(--text-light);
      transition: color 0.2s;
      padding: 8px 0;
      text-decoration: none;
    }
    
    .bottom-nav-item.active {
      color: var(--primary);
    }
    
    .bottom-nav-icon {
      font-size: 22px;
    }
    
    .bottom-nav-label {
      font-size: 12px;
      font-weight: 500;
    }
    
    .divine-name {
      color: var(--divine);
      font-weight: 700;
    }
    
    /* Режим чтения */
    body.reading-mode {
      background-color: #f4ead5; /* цвет бумаги */
    }
    
    body.reading-mode .psalm-card {
      background-color: #f9f5eb;
      box-shadow: none;
    }
    
    body.reading-mode .russian-text {
      font-size: 22px;
    }
    
    body.reading-mode .hebrew-text {
      font-size: 24px;
    }
    
    body.reading-mode .header,
    body.reading-mode .bottom-nav,
    body.reading-mode .psalm-selector {
      display: none;
    }
    
    body.reading-mode .container {
      padding-top: 20px;
    }
    
    body.reading-mode .exit-reading-mode {
      display: block;
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 200;
    }
    
    .exit-reading-mode {
      display: none;
    }
    
    /* Темная тема */
    body.dark-mode {
      --background: #121212;
      --card: #1e1e1e;
      --text: #e0e0e0;
      --hebrew-text: #f0f0f0;
      --text-light: #b0b0b0;
      --border: #333333;
    }
    
    @media (max-width: 600px) {
      .psalm-title {
        font-size: 20px;
      }
      
      .russian-text {
        font-size: 16px;
      }
      
      .hebrew-text {
        font-size: 18px;
      }
    }
  </style>
</head>
<body>
  <!-- Заголовок -->
  <header class="header">
    <a href="index.html" class="back-button" style="text-decoration: none; font-size: 20px;">←</a>
    <div class="header-title">Книга Теилим - ספר תהילים</div>
    <div class="header-actions">
      <button class="icon-btn" id="toggle-theme">🌙</button>
      <button class="icon-btn" id="toggle-reading-mode">📖</button>
    </div>
  </header>
  
  <!-- Выход из режима чтения -->
  <button class="icon-btn exit-reading-mode" id="exit-reading-mode">❌</button>
  
  <!-- Основной контент -->
  <div class="container">
    <!-- Выбор псалма -->
    <div class="psalm-selector">
      <div class="psalm-number">
        Псалом <span id="current-psalm">1</span> - תהילים <span id="current-psalm-hebrew">א</span>
      </div>
      <div class="psalm-navigation">
        <button class="nav-btn" id="prev-psalm" disabled>←</button>
        <button class="nav-btn" id="select-psalm">Выбрать</button>
        <button class="nav-btn" id="next-psalm">→</button>
      </div>
    </div>
    
    <!-- Содержимое псалма -->
    <div class="psalm-card">
      <h2 class="psalm-title">Псалом 1 - מזמור א</h2>
      
      <div class="psalm-text" id="psalm-content">
        <!-- Стих 1 -->
        <div class="verse">
          <div class="verse-number">1</div>
          <div class="russian-text">Блажен муж, который не ходит на совет нечестивых, и не стоит на пути грешников, и не сидит в собрании развратителей.</div>
          <div class="hebrew-text">אַשְׁרֵי הָאִישׁ אֲשֶׁר לֹא הָלַךְ בַּעֲצַת רְשָׁעִים וּבְדֶרֶךְ חַטָּאִים לֹא עָמָד וּבְמוֹשַׁב לֵצִים לֹא יָשָׁב׃</div>
        </div>
        
        <!-- Стих 2 -->
        <div class="verse">
          <div class="verse-number">2</div>
          <div class="russian-text">Но в законе <span class="divine-name">Г-спода</span> воля его, и о законе Его размышляет он день и ночь.</div>
          <div class="hebrew-text">כִּי אִם בְּתוֹרַת יְהוָה חֶפְצוֹ וּבְתוֹרָתוֹ יֶהְגֶּה יוֹמָם וָלָיְלָה׃</div>
        </div>
        
        <!-- Стих 3 -->
        <div class="verse">
          <div class="verse-number">3</div>
          <div class="russian-text">И будет он как дерево, посаженное при потоках вод, которое приносит плод свой во время свое, и лист которого не вянет; и во всем, что он ни делает, успеет.</div>
          <div class="hebrew-text">וְהָיָה כְּעֵץ שָׁתוּל עַל פַּלְגֵי מָיִם אֲשֶׁר פִּרְיוֹ יִתֵּן בְּעִתּוֹ וְעָלֵהוּ לֹא יִבּוֹל וְכֹל אֲשֶׁר יַעֲשֶׂה יַצְלִיחַ׃</div>
        </div>
        
        <!-- Стих 4 -->
        <div class="verse">
          <div class="verse-number">4</div>
          <div class="russian-text">Не так нечестивые; но они – как прах, возметаемый ветром.</div>
          <div class="hebrew-text">לֹא כֵן הָרְשָׁעִים כִּי אִם כַּמֹּץ אֲשֶׁר תִּדְּפֶנּוּ רוּחַ׃</div>
        </div>
        
        <!-- Стих 5 -->
        <div class="verse">
          <div class="verse-number">5</div>
          <div class="russian-text">Потому не устоят нечестивые на суде, и грешники – в собрании праведных.</div>
          <div class="hebrew-text">עַל כֵּן לֹא יָקֻמוּ רְשָׁעִים בַּמִּשְׁפָּט וְחַטָּאִים בַּעֲדַת צַדִּיקִים׃</div>
        </div>
        
        <!-- Стих 6 -->
        <div class="verse">
          <div class="verse-number">6</div>
          <div class="russian-text">Ибо знает <span class="divine-name">Г-сподь</span> путь праведных, а путь нечестивых погибнет.</div>
          <div class="hebrew-text">כִּי יוֹדֵעַ יְהוָה דֶּרֶךְ צַדִּיקִים וְדֶרֶךְ רְשָׁעִים תֹּאבֵד׃</div>
        </div>
      </div>
      
      <div class="psalm-actions">
        <button class="action-btn" id="btn-print">🖨️ Печать</button>
        <button class="action-btn" id="btn-share">🔗 Поделиться</button>
        <button class="action-btn" id="btn-save">💾 Сохранить</button>
      </div>
    </div>
  </div>
  
  <!-- Нижняя навигация -->
  <nav class="bottom-nav">
    <a href="index.html" class="bottom-nav-item">
      <div class="bottom-nav-icon">🏠</div>
      <div class="bottom-nav-label">Главная</div>
    </a>
    <a href="#" class="bottom-nav-item active">
      <div class="bottom-nav-icon">📖</div>
      <div class="bottom-nav-label">Теилим</div>
    </a>
    <a href="correct-text.html" class="bottom-nav-item">
      <div class="bottom-nav-icon">✏️</div>
      <div class="bottom-nav-label">Исправить</div>
    </a>
    <a href="tehilim-mobile-community.html" class="bottom-nav-item">
      <div class="bottom-nav-icon">👥</div>
      <div class="bottom-nav-label">Сообщество</div>
    </a>
  </nav>
  
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Начальные значения
      let currentPsalm = 1;
      const totalPsalms = 150;
      
      // Ивритские числа для первых 10 псалмов
      const hebrewNumbers = ['א', 'ב', 'ג', 'ד', 'ה', 'ו', 'ז', 'ח', 'ט', 'י', 'י״א', 'י״ב', 'י״ג', 'י״ד', 'ט״ו'];
      
      // Обработчики навигации
      const prevBtn = document.getElementById('prev-psalm');
      const nextBtn = document.getElementById('next-psalm');
      const selectBtn = document.getElementById('select-psalm');
      const currentPsalmSpan = document.getElementById('current-psalm');
      const currentPsalmHebrewSpan = document.getElementById('current-psalm-hebrew');
      
      // Обновление псалма
      function updatePsalm() {
        currentPsalmSpan.textContent = currentPsalm;
        currentPsalmHebrewSpan.textContent = currentPsalm <= hebrewNumbers.length ? hebrewNumbers[currentPsalm - 1] : currentPsalm;
        
        document.querySelector('.psalm-title').textContent = `Псалом ${currentPsalm} - מזמור ${currentPsalm <= hebrewNumbers.length ? hebrewNumbers[currentPsalm - 1] : currentPsalm}`;
        
        // Обновление состояния кнопок
        prevBtn.disabled = currentPsalm <= 1;
        nextBtn.disabled = currentPsalm >= totalPsalms;
        
        // В реальном проекте здесь будет загрузка содержимого псалма
        // loadPsalmContent(currentPsalm);
      }
      
      // Переход к предыдущему псалму
      prevBtn.addEventListener('click', function() {
        if (currentPsalm > 1) {
          currentPsalm--;
          updatePsalm();
        }
      });
      
      // Переход к следующему псалму
      nextBtn.addEventListener('click', function() {
        if (currentPsalm < totalPsalms) {
          currentPsalm++;
          updatePsalm();
        }
      });
      
      // Выбор псалма
      selectBtn.addEventListener('click', function() {
        const psalmNumber = prompt(`Выберите псалом (1-${totalPsalms}):`, currentPsalm);
        
        if (psalmNumber !== null) {
          const num = parseInt(psalmNumber);
          
          if (!isNaN(num) && num >= 1 && num <= totalPsalms) {
            currentPsalm = num;
            updatePsalm();
          } else {
            alert(`Пожалуйста, введите число от 1 до ${totalPsalms}.`);
          }
        }
      });
      
      // Переключение темы
      const themeToggleBtn = document.getElementById('toggle-theme');
      
      themeToggleBtn.addEventListener('click', function() {
        document.body.classList.toggle('dark-mode');
        themeToggleBtn.textContent = document.body.classList.contains('dark-mode') ? '☀️' : '🌙';
      });
      
      // Режим чтения
      const readingModeBtn = document.getElementById('toggle-reading-mode');
      const exitReadingModeBtn = document.getElementById('exit-reading-mode');
      
      readingModeBtn.addEventListener('click', function() {
        document.body.classList.add('reading-mode');
      });
      
      exitReadingModeBtn.addEventListener('click', function() {
        document.body.classList.remove('reading-mode');
      });
      
      // Обработчики действий
      document.getElementById('btn-print').addEventListener('click', function() {
        window.print();
      });
      
      document.getElementById('btn-share').addEventListener('click', function() {
        if (navigator.share) {
          navigator.share({
            title: `Теилим - Псалом ${currentPsalm}`,
            text: `Псалом ${currentPsalm} из книги Теилим`,
            url: window.location.href,
          });
        } else {
          alert('Функция "Поделиться" не поддерживается вашим браузером.');
        }
      });
      
      document.getElementById('btn-save').addEventListener('click', function() {
        alert('Псалом сохранен в избранном!');
      });
    });
  </script>
</body>
</html>/**
 * מנוע תיקון שמות השם משופר
 * 
 * הספרייה הזו מרחיבה את יכולות תיקון שמות השם בטקסטים ברוסית
 * עם תמיכה בהתאמות מורפולוגיות, שמירה על אותיות גדולות/קטנות,
 * ומגוון אפשרויות תיקון
 */

class DivineNameCorrector {
  constructor(options = {}) {
    // הגדרות ברירת מחדל
    this.options = {
      defaultStyle: 'dash',         // סגנון תיקון ברירת מחדל
      preserveCase: true,           // שמירה על אותיות גדולות/קטנות
      highlightChanges: false,      // האם להדגיש את השינויים בטקסט המתוקן
      includeExplanation: false,    // האם לכלול הסבר על השינויים שבוצעו
      strictMode: false,            // חיפוש מדויק או גמיש
      includeStats: true,           // האם לכלול סטטיסטיקות
      ...options
    };

    // הגדרת סגנונות תיקון
    this.styles = {
      dash: {
        name: 'С дефисом',
        example: 'Б-г',
        description: 'Замена буквы дефисом'
      },
      hebrew: {
        name: 'Иврит',
        example: 'ה\'',
        description: 'Замена на соответствующее имя на иврите'
      },
      hashem: {
        name: 'Словом',
        example: 'Вс-вышний',
        description: 'Замена на альтернативное название'
      },
      brackets: {
        name: 'В скобках',
        example: 'Б[о]г',
        description: 'Помещение буквы в скобки'
      },
      transliteration: {
        name: 'Транслитерация',
        example: 'Ашем',
        description: 'Использование транслитерации'
      }
    };

    // הגדרת המילונים לפי סגנון
    this.initializeDictionaries();
  }

  // אתחול מילוני החלפה
  initializeDictionaries() {
    // מילון המילים להחלפה - עם כל הנטיות והצורות
    this.replacementDictionary = {
      // "בוג" = אלוהים
      'бог': {
        dash: 'Б-г',
        hebrew: 'ה\'',
        hashem: 'Вс-вышний', 
        brackets: 'Б[о]г',
        transliteration: 'Ашем'
      },
      'бога': {
        dash: 'Б-га',
        hebrew: 'ה\'',
        hashem: 'Вс-вышнего',
        brackets: 'Б[о]га',
        transliteration: 'Ашема'
      },
      'богу': {
        dash: 'Б-гу',
        hebrew: 'ה\'',
        hashem: 'Вс-вышнему',
        brackets: 'Б[о]гу',
        transliteration: 'Ашему'
      },
      'богом': {
        dash: 'Б-гом',
        hebrew: 'ה\'',
        hashem: 'Вс-вышним',
        brackets: 'Б[о]гом',
        transliteration: 'Ашемом'
      },
      'боге': {
        dash: 'Б-ге',
        hebrew: 'ה\'',
        hashem: 'Вс-вышнем',
        brackets: 'Б[о]ге',
        transliteration: 'Ашеме'
      },
      'боже': {
        dash: 'Б-же',
        hebrew: 'ה\'',
        hashem: 'Вс-вышний',
        brackets: 'Б[о]же',
        transliteration: 'Ашем'
      },
      'божество': {
        dash: 'Б-жество',
        hebrew: 'ה\'',
        hashem: 'Вс-вышний',
        brackets: 'Б[о]жество',
        transliteration: 'Ашем'
      },

      // "גוספוד" = אדון
      'господь': {
        dash: 'Г-сподь',
        hebrew: 'ה\'',
        hashem: 'а-Шем',
        brackets: 'Г[о]сподь',
        transliteration: 'а-Шем'
      },
      'господа': {
        dash: 'Г-спода',
        hebrew: 'ה\'',
        hashem: 'а-Шема',
        brackets: 'Г[о]спода',
        transliteration: 'а-Шема'
      },
      'господу': {
        dash: 'Г-споду',
        hebrew: 'ה\'',
        hashem: 'а-Шему',
        brackets: 'Г[о]споду',
        transliteration: 'а-Шему'
      },
      'господом': {
        dash: 'Г-сподом',
        hebrew: 'ה\'',
        hashem: 'а-Шемом',
        brackets: 'Г[о]сподом',
        transliteration: 'а-Шемом'
      },
      'господе': {
        dash: 'Г-споде',
        hebrew: 'ה\'',
        hashem: 'а-Шеме',
        brackets: 'Г[о]споде',
        transliteration: 'а-Шеме'
      },

      // "וסביישני" = עליון
      'всевышний': {
        dash: 'Вс-вышний',
        hebrew: 'ה\'',
        hashem: 'Вс-вышний',
        brackets: 'Вс[е]вышний',
        transliteration: 'Элйон'
      },
      'всевышнего': {
        dash: 'Вс-вышнего',
        hebrew: 'ה\'',
        hashem: 'Вс-вышнего',
        brackets: 'Вс[е]вышнего',
        transliteration: 'Элйона'
      },
      'всевышнему': {
        dash: 'Вс-вышнему',
        hebrew: 'ה\'',
        hashem: 'Вс-вышнему',
        brackets: 'Вс[е]вышнему',
        transliteration: 'Элйону'
      },
      'всевышним': {
        dash: 'Вс-вышним',
        hebrew: 'ה\'',
        hashem: 'Вс-вышним',
        brackets: 'Вс[е]вышним',
        transliteration: 'Элйоном'
      },
      'всевышнем': {
        dash: 'Вс-вышнем',
        hebrew: 'ה\'',
        hashem: 'Вс-вышнем',
        brackets: 'Вс[е]вышнем',
        transliteration: 'Элйоне'
      },

      // "אדונאי"
      'адонай': {
        dash: 'А-донай',
        hebrew: 'ה\'',
        hashem: 'а-Шем',
        brackets: 'А[д]import React, { useState } from 'react';
import { Clock, MessageCircle, Heart, Share2, Users, BookOpen, Calendar, Search, PlusCircle } from 'lucide-react';

// נתונים לדוגמה - קבוצות תפילה
const prayerGroups = [
  {
    id: 1,
    name: 'תהילים יומי',
    members: 124,
    schedule: 'כל יום בשעה 19:00',
    description: 'קריאת תהילים משותפת מדי יום לעילוי נשמות',
    type: 'public',
    lastActivity: '2025-04-23T14:30:00Z',
    language: 'russian'
  },
  {
    id: 2,
    name: 'תפילה לרפואה',
    members: 47,
    schedule: 'ימי שני וחמישי בשעה 20:30',
    description: 'קבוצת תפילה מיוחדת לרפואת חולים',
    type: 'public',
    lastActivity: '2025-04-24T09:15:00Z',
    language: 'dual'
  },
  {
    id: 3,
    name: 'תיקון הכללי',
    members: 78,
    schedule: 'יום שישי בשעה 14:00',
    description: 'אמירת 10 מזמורי תיקון הכללי לפי רבי נחמן',
    type: 'private',
    lastActivity: '2025-04-22T18:45:00Z',
    language: 'hebrew'
  }
];

// נתונים לדוגמה - פוסטים בקהילה
const communityPosts = [
  {
    id: 1,
    author: {
      name: 'אלכסנדר כהן',
      avatar: 'AC'
    },
    title: 'שאלה בנוגע לניקוד בפרק כ"ג',
    content: 'האם מישהו יכול להסביר את הניקוד הנכון במילים "לֹא אֶחְסָר" בתחילת המזמור? יש לי ספק לגבי הקמץ במילה אחסר.',
    timestamp: '2025-04-24T08:30:00Z',
    tags: ['ניקוד', 'תהילים', 'פרק כ"ג'],
    likes: 12,
    comments: 8
  },
  {
    id: 2,
    author: {
      name: 'מרינה לוי',
      avatar: 'ML'
    },
    title: 'חלוקת ספר תהילים לקבוצה של 30 אנשים',
    content: 'אנחנו מארגנים קבוצה של 30 אנשים שיחלקו ביניהם את כל ספר תהילים לאמירה ביום אחד מדי חודש. האם יש למישהו טבלת חלוקה נוחה או המלצות?',
    timestamp: '2025-04-23T15:45:00Z',
    tags: ['חלוקת תהילים', 'לימוד בקבוצה'],
    likes: 24,
    comments: 15
  },
  {
    id: 3,
    author: {
      name: 'דוד גולדשטיין',
      avatar: 'DG'
    },
    title: 'שיתוף: תרגום חדש לפרק קל"ט',
    content: 'עבדתי על תרגום חדש לפרק קל"ט עם הקפדה על שמות ה׳. אשמח לקבל משוב מכם לפני שאעלה זאת לספרייה המרכזית.',
    timestamp: '2025-04-22T11:20:00Z',
    tags: ['תרגום', 'שיתוף', 'פרק קל"ט'],
    likes: 18,
    comments: 7
  }
];

// נתונים לדוגמה - חלוקות תהילים
const tehilimDistributions = [
  {
    id: 1,
    title: 'חלוקה יומית - לרפואת חולים',
    status: 'active',
    participants: 116,
    completion: 85,
    endsAt: '2025-04-26T23:59:59Z',
    description: 'מסיימים את כל ספר תהילים מדי יום'
  },
  {
    id: 2,
    title: 'חלוקה חודשית - לעילוי נשמת',
    status: 'active',
    participants: 42,
    completion: 64,
    endsAt: '2025-05-15T23:59:59Z',
    description: 'חלוקה חודשית לעילוי נשמות'
  },
  {
    id: 3,
    title: 'תהילים לשלום ישראל',
    status: 'upcoming',
    participants: 28,
    completion: 0,
    endsAt: '2025-05-01T23:59:59Z',
    description: 'קריאת תהילים משותפת ביום העצמאות'
  }
];

// קומפוננט ראשי
const TehilimCommunity = () => {
  const [activeTab, setActiveTab] = useState('feed');
  const [searchQuery, setSearchQuery] = useState('');

  // חישוב זמן יחסי
  const formatRelativeTime = (dateString) => {
    const date = new Date(dateString);
    const now = new Date();
    const diffInMinutes = Math.floor((now - date) / (1000 * 60));
    
    if (diffInMinutes < 60) {
      return `לפני ${diffInMinutes} דקות`;
    } else if (diffInMinutes < 24 * 60) {
      const hours = Math.floor(diffInMinutes / 60);
      return `לפני ${hours} שעות`;
    } else {
      const days = Math.floor(diffInMinutes / (60 * 24));
      return `לפני ${days} ימים`;
    }
  };

  // הצגת מיקום השפה
  const renderLanguageBadge = (language) => {
    switch(language) {
      case 'hebrew':
        return <span className="px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800">עברית</span>;
      case 'russian':
        return <span className="px-2 py-1 text-xs rounded-full bg-purple-100 text-purple-800">רוסית</span>;
      case 'dual':
        return <span className="px-2 py-1 text-xs rounded-full bg-green-100 text-green-800">דו-לשוני</span>;
      default:
        return null;
    }
  };

  return (
    <div className="min-h-screen bg-gray-50 text-gray-900 font-sans overflow-x-hidden">
      {/* כותרת */}
      <header className="bg-white shadow-sm p-4 flex items-center justify-between sticky top-0 z-10">
        <div className="flex items-center gap-2">
          <h1 className="text-xl font-bold text-blue-600">קהילת תהילים בקדושה</h1>
        </div>
        <div className="flex items-center gap-3">
          <button className="p-2 rounded-full hover:bg-gray-100">
            <Search size={20} />
          </button>
          <button className="p-2 rounded-full hover:bg-gray-100">
            <Users size={20} />
          </button>
        </div>
      </header>

      {/* תיבת חיפוש */}
      <div className="max-w-4xl mx-auto p-4">
        <div className="relative mb-6">
          <input
            type="text"
            className="w-full p-3 pl-10 rounded-lg border border-gray-300 shadow-sm"
            placeholder="חיפוש בקהילה..."
            value={searchQuery}
            onChange={(e) => setSearchQuery(e.target.value)}
          />
          <div className="absolute left-3 top-3 text-gray-400">
            <Search size={20} />
          </div>
        </div>

        {/* טאבים */}
        <div className="flex overflow-x-auto bg-white rounded-lg shadow-sm mb-6">
          <button
            className={`px-4 py-3 font-medium text-sm flex-1 ${activeTab === 'feed' ? 'text-blue-600 border-b-2 border-blue-600' : 'text-gray-600'}`}
            onClick={() => setActiveTab('feed')}
          >
            פיד הקהילה
          </button>
          <button
            className={`px-4 py-3 font-medium text-sm flex-1 ${activeTab === 'groups' ? 'text-blue-600 border-b-2 border-blue-600' : 'text-gray-600'}`}
            onClick={() => setActiveTab('groups')}
          >
            קבוצות תפילה
          </button>
          <button
            className={`px-4 py-3 font-medium text-sm flex-1 ${activeTab === 'distribution' ? 'text-blue-600 border-b-2 border-blue-600' : 'text-gray-600'}`}
            onClick={() => setActiveTab('distribution')}
          >
            חלוקת תהילים
          </button>
        </div>

        {/* תוכן הטאב הפעיל */}
        <div className="space-y-6">
          {/* פיד הקהילה */}
          {activeTab === 'feed' && (
            <>
              {/* כפתור יצירת פוסט חדש */}
              <div className="bg-white rounded-lg shadow-sm p-4 mb-6 flex items-center gap-3">
                <div className="w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 font-bold">
                  A
                </div>
                <button 
                  className="flex-1 bg-gray-100 hover:bg-gray-200 rounded-full py-2 px-4 text-right text-gray-500"
                >
                  שתף שאלה או תובנה עם הקהילה...
                </button>
                <button className="text-blue-600">
                  <PlusCircle size={24} />
                </button>
              </div>

              {/* רשימת פוסטים */}
              {communityPosts.map(post => (
                <div key={post.id} className="bg-white rounded-lg shadow-sm overflow-hidden">
                  {/* כותרת הפוסט */}
                  <div className="p-4 border-b border-gray-100">
                    <div className="flex items-center gap-3 mb-3">
                      <div className="w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 font-bold">
                        {post.author.avatar}
                      </div>
                      <div>
                        <div className="font-medium">{post.author.name}</div>
                        <div className="text-xs text-gray-500">{formatRelativeTime(post.timestamp)}</div>
                      </div>
                    </div>
                    <h3 className="text-lg font-bold mb-2">{post.title}</h3>
                    <p className="text-gray-700">{post.content}</p>
                  </div>
                  
                  {/* תגיות */}
                  <div className="px-4 py-2 bg-gray-50">
                    <div className="flex gap-2 flex-wrap">
                      {post.tags.map((tag, index) => (
                        <span key={index} className="px-2 py-1 bg-blue-50 text-blue-700 rounded-full text-xs">
                          #{tag}
                        </span>
                      ))}
                    </div>
                  </div>
                  
                  {/* אינטראקציות */}
                  <div className="px-4 py-3 flex justify-between text-gray-500 text-sm">
                    <div className="flex gap-6">
                      <button className="flex items-center gap-1 hover:text-blue-600">
                        <MessageCircle size={18} />
                        <span>{post.comments}</span>
                      </button>
                      <button className="flex items-center gap-1 hover:text-red-500">
                        <Heart size={18} />
                        <span>{post.likes}</span>
                      </button>
                    </div>
                    <button className="flex items-center gap-1 hover:text-blue-600">
                      <Share2 size={18} />
                      <span>שתף</span>
                    </button>
                  </div>
                </div>
              ))}
            </>
          )}

          {/* קבוצות תפילה */}
          {activeTab === 'groups' && (
            <>
              {/* כפתור יצירת קבוצה חדשה */}
              <div className="flex justify-end mb-4">
                <button className="bg-blue-600 text-white px-4 py-2 rounded-lg shadow-sm hover:bg-blue-700 flex items-center gap-2">
                  <PlusCircle size={18} />
                  <span>קבוצה חדשה</span>
                </button>
              </div>

              {/* רשימת קבוצות */}
              {prayerGroups.map(group => (
                <div key={group.id} className="bg-white rounded-lg shadow-sm p-4 flex gap-4 relative mb-4">
                  <div className="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 self-start">
                    <BookOpen size={20} />
                  </div>
                  <div className="flex-1">
                    <div className="flex justify-between mb-1">
                      <h3 className="font-bold">{group.name}</h3>
                      {renderLanguageBadge(group.language)}
                    </div>
                    <p className="text-gray-500 text-sm mb-2">{group.description}</p>
                    <div className="flex flex-wrap gap-2 text-xs text-gray-600 mb-3">
                      <div className="flex items-center gap-1">
                        <Users size={14} />
                        <span>{group.members} משתתפים</span>
                      </div>
                      <div className="flex items-center gap-1">
                        <Calendar size={14} />
                        <span>{group.schedule}</span>
                      </div>
                      <div className="flex items-center gap-1">
                        <Clock size={14} />
                        <span>עדכון {formatRelativeTime(group.lastActivity)}</span>
                      </div>
                    </div>
                    <div className="flex gap-2">
                      <button className="px-3 py-1 bg-blue-600 text-white rounded-md text-sm">
                        הצטרף
                      </button>
                      <button className="px-3 py-1 bg-gray-100 text-gray-600 rounded-md text-sm">
                        פרטים
                      </button>
                    </div>
                  </div>
                  {group.type === 'private' && (
                    <div className="absolute top-3 left-3 text-gray-500">
                      <span className="text-xs bg-gray-100 px-2 py-1 rounded-full">קבוצה פרטית</span>
                    </div>
                  )}
                </div>
              ))}
            </>
          )}

          {/* חלוקת תהילים */}
          {activeTab === 'distribution' && (
            <>
              <div className="bg-white rounded-lg shadow-sm p-4 mb-6">
                <h2 className="text-xl font-bold mb-4">חלוקת ספר תהילים</h2>
                <p className="mb-4">השתתפו בחלוקת ספר תהילים בין חברי הקהילה. בחרו פרקים לקריאה או הצטרפו לאחת החלוקות הקיימות.</p>
                
                <div className="flex justify-end mb-4">
                  <button className="bg-blue-600 text-white px-4 py-2 rounded-lg shadow-sm hover:bg-blue-700 flex items-center gap-2">
                    <PlusCircle size={18} />
                    <span>צור חלוקה חדשה</span>
                  </button>
                </div>
              </div>
              
              {/* רשימת חלוקות */}
              {tehilimDistributions.map(dist => (
                <div key={dist.id} className={`bg-white rounded-lg shadow-sm mb-4 overflow-hidden border-r-4 ${dist.status === 'active' ? 'border-green-500' : 'border-yellow-500'}`}>
                  <div className="p-4">
                    <div className="flex justify-between items-center mb-2">
                      <h3 className="font-bold text-lg">{dist.title}</h3>
                      <span className={`px-2 py-1 rounded-full text-xs ${dist.status === 'active' ? 'bg-green-100 text-green-800' : 'bg-yellow-100 text-yellow-800'}`}>
                        {dist.status === 'active' ? 'פעילה' : 'עתידית'}
                      </span>
                    </div>
                    
                    <p className="text-gray-600 text-sm mb-3">{dist.description}</p>
                    
                    <div className="bg-gray-100 rounded-full h-2 mb-2">
                      <div 
                        className="bg-blue-500 rounded-full h-2" 
                        style={{ width: `${dist.completion}%` }}
                      ></div>
                    </div>
                    
                    <div className="flex justify-between text-sm text-gray-500 mb-4">
                      <span>{dist.completion}% הושלמו</span>
                      <span>{dist.participants} משתתפים</span>
                    </div>
                    
                    <div className="flex gap-2">
                      <button className="px-4 py-2 bg-blue-600 text-white rounded-md text-sm flex-1">
                        הצטרף לחלוקה
                      </button>
                      <button className="px-4 py-2 bg-gray-100 text-gray-600 rounded-md text-sm">
                        פרטים
                      </button>
                    </div>
                  </div>
                </div>
              ))}
              
              {/* טבלת החלוקה האישית */}
              <div className="bg-white rounded-lg shadow-sm p-4">
                <h3 className="font-bold mb-3">הפרקים שלי</h3>
                <p className="text-sm text-gray-600 mb-4">הפרקים שבחרת לקרוא בחלוקות הפעילות</p>
                
                <div className="border rounded-lg overflow-hidden">
                  <table className="w-full text-sm">
                    <thead className="bg-gray-50">
                      <tr>
                        <th className="py-2 px-3 text-right font-medium text-gray-500">פרק</th>
                        <th className="py-2 px-3 text-right font-medium text-gray-500">חלוקה</th>
                        <th className="py-2 px-3 text-right font-medium text-gray-500">תאריך יעד</th>
                        <th className="py-2 px-3 text-right font-medium text-gray-500">סטטוס</th>
                      </tr>
                    </thead>
                    <tbody className="divide-y divide-gray-200">
                      <tr>
                        <td className="py-3 px-3">פרק כ״ג</td>
                        <td className="py-3 px-3">חלוקה יומית - לרפואת חולים</td>
                        <td className="py-3 px-3">היום, 23:59</td>
                        <td className="py-3 px-3"><span className="px-2 py-1 rounded-full text-xs bg-yellow-100 text-yellow-800">בהמתנה</span></td>
                      </tr>
                      <tr>
                        <td className="py-3 px-3">פרק צ״א</td>
                        <td className="py-3 px-3">חלוקה יומית - לרפואת חולים</td>
                        <td className="py-3 px-3">היום, 23:59</td>
                        <td className="py-3 px-3"><span className="px-2 py-1 rounded-full text-xs bg-green-100 text-green-800">הושלם</span></td>
                      </tr>
                      <tr>
                        <td className="py-3 px-3">פרק ק״ל</td>
                        <td className="py-3 px-3">תהילים לשלום ישראל</td>
                        <td className="py-3 px-3">01/05/2025</td>
                        <td className="py-3 px-3"><span className="px-2 py-1 rounded-full text-xs bg-blue-100 text-blue-800">עתידי</span></td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </>
          )}
        </div>
      </div>
      
      {/* ניווט תחתון */}
      <nav className="fixed bottom-0 left-0 right-0 bg-white shadow-lg flex justify-around">
        <button className="flex flex-col items-center py-2 px-4 text-blue-600">
          <div className="text-xl mb-1">📝</div>
          <div className="text-xs">פיד</div>
        </button>
        <button className="flex flex-col items-center py-2 px-4 text-gray-500">
          <div className="text-xl mb-1">👥</div>
          <div className="text-xs">קבוצות</div>
        </button>
        <button className="flex flex-col items-center py-2 px-4 text-gray-500">
          <div className="text-xl mb-1">📖</div>
          <div className="text-xs">תהילים</div>
        </button>
        <button className="flex flex-col items-center py-2 px-4 text-gray-500">
          <div className="text-xl mb-1">👤</div>
          <div className="text-xs">פרופיל</div>
        </button>
      </nav>
    </div>
  );
};

export default TehilimCommunity;import React, { useState, useEffect } from 'react';
import { Calendar, Clock, Trash2, Edit2, Share, PlusCircle, User, Users, Heart } from 'lucide-react';

// טיפוסי מידע
type Dedication = {
  id: string;
  name: {
    hebrew: string;
    russian: string;
  };
  motherName?: {
    hebrew: string;
    russian: string;
  };
  relation: string;
  dateOfDeath: {
    hebrew: string;
    gregorian: string;
  };
  hasPortrait: boolean;
  psalms: string[];
  sharedWith: string[];
  notes?: string;
};

// נתונים לדוגמה
const sampleDedications: Dedication[] = [
  {
    id: '1',
    name: {
      hebrew: 'אברהם בן יעקב',
      russian: 'Авраам бен Яаков'
    },
    motherName: {
      hebrew: 'שרה',
      russian: 'Сара'
    },
    relation: 'father',
    dateOfDeath: {
      hebrew: 'י״ב אלול תשפ״ג',
      gregorian: '2023-08-29'
    },
    hasPortrait: true,
    psalms: ['23', '91', '103'],
    sharedWith: ['Семья Коган', 'Синагога Москвы'],
    notes: 'Любимый отец и дедушка'
  },
  {
    id: '2',
    name: {
      hebrew: 'רחל בת דוד',
      russian: 'Рахель бат Давид'
    },
    motherName: {
      hebrew: 'לאה',
      russian: 'Лея'
    },
    relation: 'mother',
    dateOfDeath: {
      hebrew: 'ג׳ ניסן תשפ״ב',
      gregorian: '2022-04-04'
    },
    hasPortrait: true,
    psalms: ['23', '121', '130'],
    sharedWith: ['Михаил Левин', 'Семья Коган'],
    notes: 'Мама, которая всегда заботилась о всех'
  }
];

// מיפוי יחס משפחתי לתיאור ברוסית
const relationMap: {[key: string]: string} = {
  'father': 'Отец',
  'mother': 'Мать',
  'grandfather': 'Дедушка',
  'grandmother': 'Бабушка',
  'brother': 'Брат',
  'sister': 'Сестра',
  'son': 'Сын',
  'daughter': 'Дочь',
  'husband': 'Муж',
  'wife': 'Жена',
  'friend': 'Друг',
  'other': 'Другое'
};

const DedicationManager: React.FC = () => {
  const [dedications, setDedications] = useState<Dedication[]>(sampleDedications);
  const [activeTab, setActiveTab] = useState<'list' | 'upcoming' | 'prayer'>('list');
  const [isAddFormVisible, setIsAddFormVisible] = useState(false);
  const [editingDedication, setEditingDedication] = useState<Dedication | null>(null);
  const [displayLanguage, setDisplayLanguage] = useState<'hebrew' | 'russian'>('russian');
  
  // פונקציות עזר
  
  // בדיקה אם תאריך יארצייט מתקרב (בטווח של שבוע)
  const isUpcomingYahrzeit = (dateStr: string): boolean => {
    const today = new Date();
    const yahrzeit = new Date(dateStr);
    
    // המרה לתאריך השנה הנוכחית - יארצייט הוא שנתי
    yahrzeit.setFullYear(today.getFullYear());
    
    // אם היארצייט כבר עבר השנה, נבדוק לשנה הבאה
    if (yahrzeit < today) {
      yahrzeit.setFullYear(today.getFullYear() + 1);
    }
    
    // חישוב הפרש בימים
    const diffTime = yahrzeit.getTime() - today.getTime();
    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
    
    return diffDays <= 7;
  };
  
  // פורמט תאריך
  const formatDate = (dateStr: string): string => {
    const date = new Date(dateStr);
    return new Intl.DateTimeFormat('ru-RU', {
      year: 'numeric',
      month: 'long',
      day: 'numeric'
    }).format(date);
  };
  
  // הוספת הקדשה חדשה
  const addDedication = (dedication: Dedication) => {
    setDedications(prev => [...prev, dedication]);
    setIsAddFormVisible(false);
  };
  
  // עריכת הקדשה קיימת
  const updateDedication = (dedication: Dedication) => {
    setDedications(prev => 
      prev.map(item => item.id === dedication.id ? dedication : item)
    );
    setEditingDedication(null);
  };
  
  // מחיקת הקדשה
  const deleteDedication = (id: string) => {
    if (window.confirm('Вы уверены, что хотите удалить эту запись?')) {
      setDedications(prev => prev.filter(item => item.id !== id));
    }
  };
  
  // רשימת הקדשות מסודרת לפי תאריך יארצייט
  const upcomingYahrzeits = dedications
    .filter(d => isUpcomingYahrzeit(d.dateOfDeath.gregorian))
    .sort((a, b) => {
      return new Date(a.dateOfDeath.gregorian).getTime() - new Date(b.dateOfDeath.gregorian).getTime();
    });

  return (
    <div className="min-h-screen bg-gray-50 text-gray-900 p-4">
      <div className="max-w-4xl mx-auto mb-6">
        {/* כותרת */}
        <div className="text-center mb-6">
          <h1 className="text-2xl font-bold text-blue-600 mb-2">Мемориал близких</h1>
          <p className="text-gray-600">Управление записями о близких для чтения молитв</p>
        </div>
        
        {/* טאבים */}
        <div className="flex bg-white rounded-lg shadow-sm mb-6 overflow-hidden">
          <button 
            className={`flex-1 py-3 px-4 ${activeTab === 'list' ? 'text-blue-600 border-b-2 border-blue-600 font-medium' : 'text-gray-500'}`}
            onClick={() => setActiveTab('list')}
          >
            Все записи
          </button>
          <button 
            className={`flex-1 py-3 px-4 ${activeTab === 'upcoming' ? 'text-blue-600 border-b-2 border-blue-600 font-medium' : 'text-gray-500'}`}
            onClick={() => setActiveTab('upcoming')}
          >
            Ближайшие даты
          </button>
          <button 
            className={`flex-1 py-3 px-4 ${activeTab === 'prayer' ? 'text-blue-600 border-b-2 border-blue-600 font-medium' : 'text-gray-500'}`}
            onClick={() => setActiveTab('prayer')}
          >
            Чтение молитв
          </button>
        </div>
        
        {/* כפתור שפה */}
        <div className="flex justify-end mb-4">
          <button 
            className="px-3 py-1 text-sm rounded-md bg-gray-100 hover:bg-gray-200 transition"
            onClick={() => setDisplayLanguage(prev => prev === 'hebrew' ? 'russian' : 'hebrew')}
          >
            {displayLanguage === 'hebrew' ? 'עברית' : 'Русский'}
          </button>
        </div>
        
        {/* כפתור הוספה */}
        <div className="flex justify-end mb-4">
          <button 
            className="bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 shadow-sm hover:bg-blue-700 transition"
            onClick={() => setIsAddFormVisible(true)}
          >
            <PlusCircle size={20} />
            <span>Добавить запись</span>
          </button>
        </div>
        
        {/* תוכן לפי טאב פעיל */}
        {activeTab === 'list' && (
          <div className="space-y-4">
            {dedications.length === 0 ? (
              <div className="bg-white p-6 rounded-lg shadow-sm text-center">
                <p className="text-gray-500">Нет сохраненных записей</p>
                <button 
                  className="mt-3 px-4 py-2 bg-blue-600 text-white rounded-lg"
                  onClick={() => setIsAddFormVisible(true)}
                >
                  Добавить первую запись
                </button>
              </div>
            ) : (
              dedications.map(dedication => (
                <div key={dedication.id} className="bg-white rounded-lg shadow-sm overflow-hidden">
                  <div className="p-4 flex flex-col md:flex-row gap-4">
                    {/* תמונה / אווטאר */}
                    <div className="w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0 self-center md:self-start">
                      {dedication.hasPortrait ? (
                        <span className="text-4xl">👤</span>
                      ) : (
                        <span className="text-4xl">🕯️</span>
                      )}
                    </div>
                    
                    {/* מידע */}
                    <div className="flex-1">
                      <h3 className="font-bold text-lg mb-1">
                        {displayLanguage === 'hebrew' ? dedication.name.hebrew : dedication.name.russian}
                      </h3>
                      
                      <div className="text-gray-500 mb-3">
                        {relationMap[dedication.relation]} • 
                        {displayLanguage === 'hebrew' 
                          ? ` יארצייט: ${dedication.dateOfDeath.hebrew}` 
                          : ` Годовщина: ${formatDate(dedication.dateOfDeath.gregorian)}`
                        }
                      </div>
                      
                      {dedication.notes && (
                        <div className="mb-3 text-gray-600">{dedication.notes}</div>
                      )}
                      
                      <div className="flex flex-wrap gap-2 mb-3">
                        {dedication.psalms.map(psalm => (
                          <span key={psalm} className="px-2 py-1 bg-blue-50 text-blue-600 text-sm rounded-full">
                            Псалом {psalm}
                          </span>
                        ))}
                      </div>
                    </div>
                    
                    {/* כפתורי פעולה */}
                    <div className="flex flex-row md:flex-col gap-2 text-gray-500 self-center md:self-start">
                      <button 
                        className="p-2 hover:bg-gray-100 rounded-full"
                        onClick={() => setEditingDedication(dedication)}
                      >
                        <Edit2 size={18} />
                      </button>
                      <button 
                        className="p-2 hover:bg-gray-100 rounded-full"
                        onClick={() => deleteDedication(dedication.id)}
                      >
                        <Trash2 size={18} />
                      </button>
                      <button className="p-2 hover:bg-gray-100 rounded-full">
                        <Share size={18} />
                      </button>
                    </div>
                  </div>
                  
                  {/* כפתורי פעולה */}
                  <div className="bg-gray-50 p-3 flex justify-between text-sm">
                    <button className="text-blue-600">
                      Читать молитвы
                    </button>
                    <div className="flex gap-2 text-gray-500">
                      <span className="flex items-center gap-1">
                        <Users size={16} />
                        <span>{dedication.sharedWith.length}</span>
                      </span>
                      <span className="flex items-center gap-1">
                        <Heart size={16} />
                        <span>{dedication.psalms.length}</span>
                      </span>
                    </div>
                  </div>
                </div>
              ))
            )}
          </div>
        )}
        
        {activeTab === 'upcoming' && (
          <div className="space-y-4">
            <div className="bg-white rounded-lg shadow-sm p-4">
              <h2 className="font-bold mb-3">Предстоящие годовщины</h2>
              
              {upcomingYahrzeits.length === 0 ? (
                <p className="text-gray-500 text-center py-6">
                  Нет предстоящих дат в ближайшие 7 дней
                </p>
              ) : (
                <div className="divide-y">
                  {upcomingYahrzeits.map(dedication => (
                    <div key={dedication.id} className="py-3 flex items-center gap-3">
                      <div className="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0">
                        🕯️
                      </div>
                      <div className="flex-1">
                        <div className="font-semibold">
                          {displayLanguage === 'hebrew' ? dedication.name.hebrew : dedication.name.russian}
                        </div>
                        <div className="text-sm text-gray-500">
                          {displayLanguage === 'hebrew'
                            ? dedication.dateOfDeath.hebrew
                            : formatDate(dedication.dateOfDeath.gregorian)
                          }
                        </div>
                      </div>
                      <div>
                        <button className="px-3 py-1 bg-blue-600 text-white text-sm rounded-lg">
                          Молитвы
                        </button>
                      </div>
                    </div>
                  ))}
                </div>
              )}
            </div>
            
            <div className="bg-white rounded-lg shadow-sm p-4">
              <h2 className="font-bold mb-3">Еврейский календарь</h2>
              <div className="border rounded-lg overflow-hidden">
                {/* תצוגת לוח שנה בסיסית */}
                <div className="grid grid-cols-7 bg-gray-50 text-center text-xs font-medium text-gray-500">
                  {['Вс', 'Пн', 'Вт', 'Ср', 'Чт', 'Пт', 'Сб'].map(day => (
                    <div key={day} className="py-2">{day}</div>
                  ))}
                </div>
                <div className="grid grid-cols-7 text-sm">
                  {[...Array(35)].map((_, i) => {
                    const day = (i % 31) + 1;
                    const isYahrzeit = i === 8 || i === 17;
                    return (
                      <div 
                        key={i} 
                        className={`py-2 text-center border-t border-r ${
                          isYahrzeit ? 'bg-blue-50' : ''}`}
                      >
                        <span className={isYahrzeit ? 'text-blue-600 font-bold' : ''}>{day}</span>
                      </div>
                    );
                  })}
                </div>
              </div>
              <div className="mt-2 text-sm text-gray-500 text-center">
                Даты с отметкой — годовщины по еврейскому календарю
              </div>
            </div>
          </div>
        )}
        
        {activeTab === 'prayer' && (
          <div className="space-y-4">
            <div className="bg-white rounded-lg shadow-sm p-4">
              <h2 className="font-bold mb-4">Выберите, для кого читать молитвы</h2>
              
              <div className="divide-y">
                {dedications.map(dedication => (
                  <div key={dedication.id} className="py-3 flex items-center gap-3">
                    <div className="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0">
                      {dedication.hasPortrait ? '👤' : '🕯️'}
                    </div>
                    <div className="flex-1">
                      <div className="font-semibold">
                        {displayLanguage === 'hebrew' ? dedication.name.hebrew : dedication.name.russian}
                      </div>
                      <div className="text-sm text-gray-500">
                        {relationMap[dedication.relation]}
                      </div>
                    </div>
                    <div>
                      <button className="px-3 py-1 bg-blue-600 text-white text-sm rounded-lg">
                        Выбрать
                      </button>
                    </div>
                  </div>
                ))}
              </div>
            </div>
            
            <div className="bg-white rounded-lg shadow-sm p-4">
              <h2 className="font-bold mb-4 flex items-center gap-2">
                <span>Рекомендуемые молитвы</span>
                <span className="text-sm font-normal bg-blue-100 text-blue-600 px-2 py-1 rounded-full">
                  За отца
                </span>
              </h2>
              
              <div className="space-y-3">
                {[
                  { id: 'kaddish', name: 'Кадиш', duration: '3 мин' },
                  { id: 'el-male', name: 'Эль мале рахамим', duration: '2 мин' },
                  { id: 'psalm-23', name: 'Псалом 23', duration: '1 мин' },
                  { id: 'psalm-91', name: 'Псалом 91', duration: '3 мин' },
                  { id: 'psalm-119', name: 'Псалом 119 по буквам имени', duration: '5 мин' }
                ].map(prayer => (
                  <div key={prayer.id} className="flex justify-between items-center border-b pb-2">
                    <div className="flex items-center gap-2">
                      <span className="w-8 h-8 bg-blue-50 text-blue-600 rounded-full flex items-center justify-center">
                        📖
                      </span>
                      <span className="font-medium">{prayer.name}</span>
                    </div>
                    <div className="flex items-center gap-3">
                      <span className="text-sm text-gray-500">{prayer.duration}</span>
                      <button className="px-3 py-1 bg-blue-600 text-white text-sm rounded-lg">
                        Читать
                      </button>
                    </div>
                  </div>
                ))}
              </div>
            </div>
          </div>
        )}
      </div>
      
      {/* טופס הוספה - לא פעיל בבניית הקומפוננט הראשונית */}
      {isAddFormVisible && (
        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
          <div className="bg-white rounded-lg max-w-lg w-full max-h-[90vh] overflow-y-auto">
            <div className="p-4 border-b flex justify-between items-center">
              <h2 className="font-bold text-lg">Добавить запись о близком</h2>
              <button onClick={() => setIsAddFormVisible(false)}>✕</button>
            </div>
            <div className="p-4">
              <div className="mb-3">
                <label className="block mb-1 font-medium">Имя на иврите</label>
                <input type="text" className="w-full p-2 border rounded" placeholder="שם בעברית" />
              </div>
              <div className="mb-3">
                <label className="block mb-1 font-medium">Имя по-русски</label>
                <input type="text" className="w-full p-2 border rounded" placeholder="Имя на русском" />
              </div>
              <div className="grid grid-cols-2 gap-3 mb-3">
                <div>
                  <label className="block mb-1 font-medium">Кем приходится</label>
                  <select className="w-full p-2 border rounded">
                    <option value="father">Отец</option>
                    <option value="mother">Мать</option>
                    <option value="grandfather">Дедушка</option>
                    <option value="grandmother">Бабушка</option>
                    <option value="other">Другое</option>
                  </select>
                </div>
                <div>
                  <label className="block mb-1 font-medium">Дата смерти</label>
                  <input type="date" className="w-full p-2 border rounded" />
                </div>
              </div>
              <div className="mb-4">
                <label className="block mb-1 font-medium">Примечания</label>
                <textarea className="w-full p-2 border rounded" rows={3}></textarea>
              </div>
              <div className="flex justify-end gap-2">
                <button 
                  className="px-4 py-2 border rounded"
                  onClick={() => setIsAddFormVisible(false)}
                >
                  Отмена
                </button>
                <button className="px-4 py-2 bg-blue-600 text-white rounded">
                  Добавить
                </button>
              </div>
            </div>
          </div>
        </div>
      )}
    </div>
  );
};

export default DedicationManager;import React, { useState, useEffect } from 'react';
import { Printer, Download, Share2, Check, RotateCcw, Save, Eye, Copy, ChevronDown, ChevronUp, FileText, ArrowLeft } from 'lucide-react';

// טיפוסי מידע
type CorrectionResult = {
  originalText: string;
  correctedText: string;
  htmlResult: string;
  style: string;
  timestamp: string;
  stats: {
    total: number;
    categories: {
      divine: number;
      lord: number;
      most_high: number;
      creator: number;
      tetragrammaton: number;
      other: number;
    }
  }
}

type CorrectionStyle = {
  id: string;
  name: string;
  example: string;
  description: string;
}

// סגנונות תיקון זמינים
const correctionStyles: CorrectionStyle[] = [
  {
    id: 'dash',
    name: 'С дефисом',
    example: 'Б-г',
    description: 'Замена буквы дефисом'
  },
  {
    id: 'hebrew',
    name: 'Иврит',
    example: 'ה\'',
    description: 'Замена на соответствующее имя на иврите'
  },
  {
    id: 'hashem',
    name: 'Словом',
    example: 'Вс-вышний',
    description: 'Замена на альтернативное название'
  },
  {
    id: 'brackets',
    name: 'В скобках',
    example: 'Б[о]г',
    description: 'Помещение буквы в скобки'
  },
  {
    id: 'transliteration',
    name: 'Транслитерация',
    example: 'Ашем',
    description: 'Использование транслитерации'
  }
];

// דוגמא לתוצאות תיקון
const sampleResult: CorrectionResult = {
  originalText: "Благословен Ты, Господь, Бог наш, Владыка Вселенной, создавший плод виноградной лозы. Благословен Ты, Господь, Бог наш, Владыка Вселенной, освятивший нас Своими заповедями и благоволивший к нам, и в любви и благоволении даровавший нам Свою святую Субботу в память о сотворении мира. Ибо этот день – начало всех святых праздников, память об исходе из Египта. Ибо нас Ты избрал и нас освятил из всех народов, и святую Субботу Свою в любви и благоволении даровал нам в наследие. Благословен Ты, Господь, освящающий Субботу.",
  correctedText: "Благословен Ты, Г-сподь, Б-г наш, Владыка Вселенной, создавший плод виноградной лозы. Благословен Ты, Г-сподь, Б-г наш, Владыка Вселенной, освятивший нас Своими заповедями и благоволивший к нам, и в любви и благоволении даровавший нам Свою святую Субботу в память о сотворении мира. Ибо этот день – начало всех святых праздников, память об исходе из Египта. Ибо нас Ты избрал и нас освятил из всех народов, и святую Субботу Свою в любви и благоволении даровал нам в наследие. Благословен Ты, Г-сподь, освящающий Субботу.",
  htmlResult: 'Благословен Ты, <span class="highlight">Г-сподь</span>, <span class="highlight">Б-г</span> наш, Владыка Вселенной, создавший плод виноградной лозы. Благословен Ты, <span class="highlight">Г-сподь</span>, <span class="highlight">Б-г</span> наш, Владыка Вселенной, освятивший нас Своими заповедями и благоволивший к нам, и в любви и благоволении даровавший нам Свою святую Субботу в память о сотворении мира. Ибо этот день – начало всех святых праздников, память об исходе из Египта. Ибо нас Ты избрал и нас освятил из всех народов, и святую Субботу Свою в любви и благоволении даровал нам в наследие. Благословен Ты, <span class="highlight">Г-сподь</span>, освящающий Субботу.',
  style: 'dash',
  timestamp: '2025-04-24T10:30:00Z',
  stats: {
    total: 5,
    categories: {
      divine: 2,
      lord: 3,
      most_high: 0,
      creator: 0,
      tetragrammaton: 0,
      other: 0
    }
  }
};

const CorrectionResults: React.FC = () => {
  const [result, setResult] = useState<CorrectionResult>(sampleResult);
  const [currentStyle, setCurrentStyle] = useState<string>(sampleResult.style);
  const [showOriginal, setShowOriginal] = useState<boolean>(false);
  const [showExplanation, setShowExplanation] = useState<boolean>(true);
  const [notificationMessage, setNotificationMessage] = useState<string | null>(null);
  
  // החלפת סגנון התיקון
  const changeStyle = (style: string) => {
    // במימוש אמיתי, כאן היינו מפעילים את מנגנון התיקון מחדש עם הסגנון החדש
    setCurrentStyle(style);
    
    // לצורך הדגמה, נשנה רק את שם הסגנון
    setResult(prev => ({
      ...prev,
      style: style
    }));
    
    showNotification('Стиль исправления изменен');
  };
  
  // הצגת התראה
  const showNotification = (message: string) => {
    setNotificationMessage(message);
    setTimeout(() => {
      setNotificationMessage(null);
    }, 3000);
  };
  
  // העתקת הטקסט המתוקן ללוח
  const copyToClipboard = () => {
    navigator.clipboard.writeText(result.correctedText)
      .then(() => {
        showNotification('Текст скопирован в буфер обмена');
      })
      .catch(err => {
        console.error('Failed to copy: ', err);
        showNotification('Ошибка при копировании');
      });
  };
  
  // שמירת התיקון להיסטוריה
  const saveCorrection = () => {
    // במימוש אמיתי, כאן היינו שומרים את התיקון
    showNotification('Исправление сохранено');
  };
  
  // הורדת הטקסט המתוקן כקובץ טקסט
  const downloadText = () => {
    const element = document.createElement('a');
    const file = new Blob([result.correctedText], {type: 'text/plain'});
    element.href = URL.createObjectURL(file);
    element.download = `corrected-text-${new Date().toISOString().slice(0,10)}.txt`;
    document.body.appendChild(element);
    element.click();
    document.body.removeChild(element);
    
    showNotification('Файл загружен');
  };
  
  // פורמט תאריך
  const formatDate = (dateString: string): string => {
    const date = new Date(dateString);
    return new Intl.DateTimeFormat('ru-RU', {
      day: 'numeric',
      month: 'long',
      year: 'numeric',
      hour: '2-digit',
      minute: '2-digit'
    }).format(date);
  };
  
  // מילון קטגוריות בשפה הרוסית
  const categoryNames: {[key: string]: string} = {
    divine: 'Б-г (и падежи)',
    lord: 'Г-сподь (и падежи)',
    most_high: 'Вс-вышний (и падежи)',
    creator: 'Тв-рец (и падежи)',
    tetragrammaton: 'Тетраграмматон',
    other: 'Другие имена'
  };
  
  return (
    <div className="min-h-screen bg-gray-50 p-4">
      <div className="max-w-4xl mx-auto">
        {/* כותרת */}
        <div className="bg-white p-4 rounded-lg shadow-sm flex items-center gap-3 mb-4">
          <a href="correct-text.html" className="text-gray-500 hover:text-gray-700">
            <ArrowLeft size={20} />
          </a>
          <h1 className="text-xl font-bold">Результаты исправления</h1>
        </div>
        
        {/* סטטיסטיקה */}
        <div className="bg-white rounded-lg shadow-sm p-4 mb-4">
          <h2 className="text-lg font-bold mb-3">Статистика исправлений</h2>
          
          <div className="grid grid-cols-3 gap-4 mb-4">
            <div className="bg-blue-50 p-3 rounded-lg text-center">
              <div className="text-2xl font-bold text-blue-600">{result.stats.total}</div>
              <div className="text-sm text-gray-600">Всего исправлений</div>
            </div>
            <div className="bg-blue-50 p-3 rounded-lg text-center">
              <div className="text-2xl font-bold text-blue-600">{Object.keys(result.stats.categories).length}</div>
              <div className="text-sm text-gray-600">Типов имён</div>
            </div>
            <div className="bg-blue-50 p-3 rounded-lg text-center">
              <div className="text-2xl font-bold text-blue-600">{result.originalText.split(' ').length}</div>
              <div className="text-sm text-gray-600">Всего слов</div>
            </div>
          </div>
          
          <div className="mb-4">
            <h3 className="font-medium mb-2">По категориям:</h3>
            <div className="grid grid-cols-2 gap-2">
              {Object.entries(result.stats.categories)
                .filter(([_, count]) => count > 0)
                .map(([category, count]) => (
                  <div key={category} className="flex justify-between items-center bg-gray-50 p-2 rounded">
                    <span>{categoryNames[category]}</span>
                    <span className="font-bold text-blue-600">{count}</span>
                  </div>
                ))}
            </div>
          </div>
        </div>
        
        {/* אפשרויות תיקון */}
        <div className="bg-white rounded-lg shadow-sm p-4 mb-4">
          <h2 className="text-lg font-bold mb-3">Стиль исправления</h2>
          
          <div className="grid grid-cols-2 md:grid-cols-3 gap-2 mb-4">
            {correctionStyles.map(style => (
              <button
                key={style.id}
                className={`p-3 border rounded-lg text-center ${currentStyle === style.id ? 'border-blue-500 bg-blue-50' : 'border-gray-200'}`}
                onClick={() => changeStyle(style.id)}
              >
                <div className="font-medium">{style.name}</div>
                <div className="text-sm text-gray-500">Пример: {style.example}</div>
              </button>
            ))}
          </div>
          
          <div className="flex justify-end">
            <button 
              className="flex items-center gap-1 text-blue-600 text-sm"
              onClick={() => setShowExplanation(!showExplanation)}
            >
              {showExplanation ? (
                <>Скрыть объяснение <ChevronUp size={16} /></>
              ) : (
                <>Показать объяснение <ChevronDown size={16} /></>
              )}
            </button>
          </div>
          
          {showExplanation && (
            <div className="mt-2 p-3 bg-blue-50 text-sm rounded-lg">
              <p className="mb-2">
                <strong>Почему важно исправлять имена Всевышнего:</strong> В еврейской традиции имена Всевышнего обладают святостью и должны использоваться с уважением. В текстах, которые могут быть напечатаны или показаны на экране, принято заменять эти имена специальными формами, чтобы избежать их стирания или неуважительного обращения.
              </p>
              
              <div className="mb-1"><strong>Варианты исправления:</strong></div>
              <ul className="list-disc pl-5 space-y-1">
                <li><strong>С дефисом (Б-г)</strong>: Классический метод, при котором одна буква заменяется дефисом.</li>
                <li><strong>Иврит (ה')</strong>: Замена на соответствующее имя на иврите.</li>
                <li><strong>Словом (Вс-вышний)</strong>: Использование альтернативных названий.</li>
                <li><strong>В скобках (Б[о]г)</strong>: Помещение одной буквы в скобки.</li>
                <li><strong>Транслитерация (Ашем)</strong>: Использование транслитерации слова "Имя" (ха-Шем).</li>
              </ul>
            </div>
          )}
        </div>
        
        {/* טקסט מתוקן */}
        <div className="bg-white rounded-lg shadow-sm p-4 mb-4">
          <div className="flex justify-between items-center mb-3">
            <h2 className="text-lg font-bold">Исправленный текст</h2>
            <button
              className="flex items-center gap-1 text-blue-600 text-sm"
              onClick={() => setShowOriginal(!showOriginal)}
            >
              {showOriginal ? (
                <>Скрыть оригинал <ChevronUp size={16} /></>
              ) : (
                <>Показать оригинал <ChevronDown size={16} /></>
              )}
            </button>
          </div>
          
          {showOriginal && (
            <div className="p-3 border border-gray-200 rounded-lg mb-3 text-gray-700">
              <div className="text-sm font-medium mb-1">Исходный текст:</div>
              <div>{result.originalText}</div>
            </div>
          )}
          
          <div className="p-3 bg-blue-50 rounded-lg mb-3">
            <div dangerouslySetInnerHTML={{ 
              __html: result.htmlResult.replace(
                /<span class="highlight">(.*?)<\/span>/g, 
                '<span style="background-color: #fff3cd; padding: 0 2px; border-radius: 2px;">$1</span>'
              ) 
            }} />
          </div>
          
          <div className="flex flex-wrap gap-2">
            <button 
              className="flex items-center gap-1 px-3 py-2 bg-blue-600 text-white rounded-lg"
              onClick={copyToClipboard}
            >
              <Copy size={16} /> Копировать
            </button>
            <button 
              className="flex items-center gap-1 px-3 py-2 bg-gray-600 text-white rounded-lg"
              onClick={downloadText}
            >
              <Download size={16} /> Скачать
            </button>
            <button 
              className="flex items-center gap-1 px-3 py-2 bg-blue-600 text-white rounded-lg"
              onClick={saveCorrection}
            >
              <Save size={16} /> Сохранить
            </button>
            <button 
              className="flex items-center gap-1 px-3 py-2 bg-gray-600 text-white rounded-lg"
            >
              <Printer size={16} /> Печать
            </button>
            <button 
              className="flex items-center gap-1 px-3 py-2 bg-green-600 text-white rounded-lg"
            >
              <Share2 size={16} /> Поделиться
            </button>
          </div>
        </div>
        
        {/* הכרטיסייה שלך */}
        <div className="bg-white rounded-lg shadow-sm p-4 mb-4">
          <h2 className="text-lg font-bold mb-3">Ваша карточка</h2>
          
          <div className="flex gap-3">
            <div className="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center text-blue-600">
              <FileText size={20} />
            </div>
            <div className="flex-1">
              <div className="flex justify-between items-center mb-1">
                <div className="font-bold">Текст молитвы (Кидуш)</div>
                <div className="text-sm text-gray-500">{formatDate(result.timestamp)}</div>
              </div>
              <div className="text-sm text-gray-600 mb-2">
                Исправлено имен: {result.stats.total} • Стиль: {correctionStyles.find(s => s.id === result.style)?.name || result.style}
              </div>
              <div className="flex gap-2">
                <button className="px-3 py-1 text-sm border border-gray-200 rounded-lg hover:bg-gray-50">
                  Редактировать заново
                </button>
                <button className="px-3 py-1 text-sm text-blue-600 border border-blue-200 rounded-lg hover:bg-blue-50">
                  В избранное
                </button>
              </div>
            </div>
          </div>
        </div>
        
        {/* כפתורי פעולה נוספים */}
        <div className="flex flex-wrap gap-2 justify-center">
          <a href="correct-text.html" className="flex items-center gap-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700">
            <RotateCcw size={16} /> Исправить новый текст
          </a>
          <a href="index.html" className="flex items-center gap-1 px-4 py-2 bg-blue-600 text-white rounded-lg">
            <Check size={16} /> Завершить
          </a>
        </div>
      </div>
      
      {/* התראה */}
      {notificationMessage && (
        <div className="fixed bottom-4 right-4 left-4 bg-green-600 text-white p-3 rounded-lg shadow-lg text-center">
          {notificationMessage}
        </div>
      )}
    </div>
  );
};

export default CorrectionResults;import React, { useState, useEffect } from 'react';
import { ChevronLeft, ChevronRight, Calendar, Info, Plus, User, ArrowLeft } from 'lucide-react';

// טיפוסי מידע
type HebrewDate = {
  day: number;
  month: number;
  year: number;
  monthName: string;
}

type CalendarDay = {
  gregorianDate: Date;
  hebrewDate: HebrewDate;
  events: YahrzeitEvent[];
  isToday: boolean;
  isCurrentMonth: boolean;
}

type YahrzeitEvent = {
  id: string;
  name: {
    hebrew: string;
    russian: string;
  };
  relation: string;
  hebrewDate: HebrewDate;
  gregorianDate: Date;
  displayColor?: string;
}

type JewishHoliday = {
  id: string;
  name: {
    hebrew: string;
    russian: string;
  };
  hebrewDate: HebrewDate;
  type: 'major' | 'minor' | 'modern' | 'fast';
  description?: string;
}

// שמות חודשים עבריים ברוסית
const hebrewMonthsRussian = [
  'Нисан', 'Ияр', 'Сиван', 'Таммуз', 'Ав', 'Элул',
  'Тишрей', 'Хешван', 'Кислев', 'Тевет', 'Шват', 'Адар', 'Адар II'
];

// שמות חודשים עבריים בעברית
const hebrewMonthsHebrew = [
  'ניסן', 'אייר', 'סיוון', 'תמוז', 'אב', 'אלול',
  'תשרי', 'חשוון', 'כסלו', 'טבת', 'שבט', 'אדר', 'אדר ב'
];

// שמות ימי השבוע ברוסית
const daysOfWeekRussian = ['Вс', 'Пн', 'Вт', 'Ср', 'Чт', 'Пт', 'Сб'];

// דוגמה לאירועי יארצייט
const sampleYahrzeits: YahrzeitEvent[] = [
  {
    id: '1',
    name: {
      hebrew: 'אברהם בן יעקב',
      russian: 'Авраам бен Яаков'
    },
    relation: 'father',
    hebrewDate: {
      day: 15,
      month: 7, // תשרי
      year: 5783,
      monthName: 'תשרי'
    },
    gregorianDate: new Date(2022, 9, 10), // October 10, 2022
    displayColor: '#4361ee'
  },
  {
    id: '2',
    name: {
      hebrew: 'שרה בת לאה',
      russian: 'Сара бат Леа'
    },
    relation: 'mother',
    hebrewDate: {
      day: 7,
      month: 1, // ניסן
      year: 5782,
      monthName: 'ניסן'
    },
    gregorianDate: new Date(2022, 3, 8), // April 8, 2022
    displayColor: '#10b981'
  },
  {
    id: '3',
    name: {
      hebrew: 'דוד בן משה',
      russian: 'Давид бен Моше'
    },
    relation: 'brother',
    hebrewDate: {
      day: 22,
      month: 2, // אייר
      year: 5783,
      monthName: 'אייר'
    },
    gregorianDate: new Date(2023, 4, 13), // May 13, 2023
    displayColor: '#8b5cf6'
  }
];

// דוגמה לחגים יהודיים
const sampleHolidays: JewishHoliday[] = [
  {
    id: 'rosh-hashana',
    name: {
      hebrew: 'ראש השנה',
      russian: 'Рош а-Шана'
    },
    hebrewDate: {
      day: 1,
      month: 7, // תשרי
      year: 5785,
      monthName: 'תשרי'
    },
    type: 'major',
    description: 'Еврейский Новый год, начало десяти дней трепета'
  },
  {
    id: 'yom-kippur',
    name: {
      hebrew: 'יום כיפור',
      russian: 'Йом Кипур'
    },
    hebrewDate: {
      day: 10,
      month: 7, // תשרי
      year: 5785,
      monthName: 'תשרי'
    },
    type: 'major',
    description: 'День искупления, самый святой день в иудаизме'
  },
  {
    id: 'pesach',
    name: {
      hebrew: 'פסח',
      russian: 'Песах'
    },
    hebrewDate: {
      day: 15,
      month: 1, // ניסן
      year: 5785,
      monthName: 'ניסן'
    },
    type: 'major',
    description: 'Праздник свободы, посвященный исходу из Египта'
  }
];

const HebrewCalendar: React.FC = () => {
  const [currentDate, setCurrentDate] = useState<Date>(new Date());
  const [calendarDays, setCalendarDays] = useState<CalendarDay[]>([]);
  const [yahrzeits, setYahrzeits] = useState<YahrzeitEvent[]>(sampleYahrzeits);
  const [holidays, setHolidays] = useState<JewishHoliday[]>(sampleHolidays);
  const [selectedDay, setSelectedDay] = useState<CalendarDay | null>(null);
  const [displayLanguage, setDisplayLanguage] = useState<'hebrew' | 'russian'>('russian');
  
  useEffect(() => {
    // בפועל, כאן היה קוד שיוצר את החודש הנוכחי בלוח השנה
    // ומשלב את אירועי היארצייט והחגים
    generateCalendarDays();
  }, [currentDate, yahrzeits, holidays, displayLanguage]);
  
  // פונקציה ליצירת ימי הלוח
  const generateCalendarDays = () => {
    const year = currentDate.getFullYear();
    const month = currentDate.getMonth();
    
    // היום הראשון בחודש
    const firstDayOfMonth = new Date(year, month, 1);
    // היום האחרון בחודש
    const lastDayOfMonth = new Date(year, month + 1, 0);
    
    // מספר הימים בחודש
    const daysInMonth = lastDayOfMonth.getDate();
    
    // היום בשבוע של היום הראשון בחודש (0 = ראשון, 6 = שבת)
    const firstDayOfWeek = firstDayOfMonth.getDay();
    
    // יצירת מערך של ימי הלוח
    const days: CalendarDay[] = [];
    
    // ימים מהחודש הקודם
    const prevMonth = new Date(year, month - 1, 1);
    const daysInPrevMonth = new Date(year, month, 0).getDate();
    
    for (let i = firstDayOfWeek - 1; i >= 0; i--) {
      const date = new Date(year, month - 1, daysInPrevMonth - i);
      days.push(createCalendarDay(date, false));
    }
    
    // ימים מהחודש הנוכחי
    for (let day = 1; day <= daysInMonth; day++) {
      const date = new Date(year, month, day);
      days.push(createCalendarDay(date, true));
    }
    
    // ימים מהחודש הבא כדי להשלים את הלוח
    const remainingDays = 42 - days.length; // 6 שורות של 7 ימים
    for (let day = 1; day <= remainingDays; day++) {
      const date = new Date(year, month + 1, day);
      days.push(createCalendarDay(date, false));
    }
    
    setCalendarDays(days);
  };
  
  // יצירת יום בלוח
  const createCalendarDay = (date: Date, isCurrentMonth: boolean): CalendarDay => {
    // בפועל, כאן היינו משתמשים בספריה לחישוב התאריך העברי
    // לצורך הדגמה, ניצור תאריך עברי פיקטיבי
    const day = date.getDate();
    const month = date.getMonth() + 1;
    const hebrewMonth = ((month + 6) % 12) + 1; // פשוט לצורך הדגמה
    const hebrewYear = date.getFullYear() + 3760;
    
    const hebrewDate: HebrewDate = {
      day,
      month: hebrewMonth,
      year: hebrewYear,
      monthName: hebrewMonthsHebrew[hebrewMonth - 1]
    };
    
    // בדיקה אם יש אירועי יארצייט ביום זה
    const dayEvents = yahrzeits.filter(event => {
      // במציאות, היינו משווים את התאריך העברי
      // לצורך הדגמה, נשווה רק יום וחודש גרגוריאני
      return event.gregorianDate.getDate() === date.getDate() &&
             event.gregorianDate.getMonth() === date.getMonth();
    });
    
    // האם היום הוא היום הנוכחי
    const today = new Date();
    const isToday = date.getDate() === today.getDate() &&
                    date.getMonth() === today.getMonth() &&
                    date.getFullYear() === today.getFullYear();
    
    return {
      gregorianDate: date,
      hebrewDate,
      events: dayEvents,
      isToday,
      isCurrentMonth
    };
  };
  
  // מעבר לחודש הקודם
  const prevMonth = () => {
    setCurrentDate(prev => {
      const newDate = new Date(prev);
      newDate.setMonth(prev.getMonth() - 1);
      return newDate;
    });
  };
  
  // מעבר לחודש הבא
  const nextMonth = () => {
    setCurrentDate(prev => {
      const newDate = new Date(prev);
      newDate.setMonth(prev.getMonth() + 1);
      return newDate;
    });
  };
  
  // פורמט שם החודש
  const formatMonthName = (date: Date): string => {
    const monthIndex = date.getMonth();
    const year = date.getFullYear();
    
    if (displayLanguage === 'hebrew') {
      const hebrewMonth = ((monthIndex + 7) % 12); // פשוט לצורך הדגמה
      const hebrewYear = year + 3760;
      return `${hebrewMonthsHebrew[hebrewMonth]} ${hebrewYear}`;
    } else {
      return `${new Intl.DateTimeFormat('ru-RU', { month: 'long' }).format(date)} ${year}`;
    }
  };
  
  // בחירת יום בלוח
  const selectDay = (day: CalendarDay) => {
    setSelectedDay(day);
  };
  
  // פורמט תאריך עברי
  const formatHebrewDate = (date: HebrewDate): string => {
    if (displayLanguage === 'hebrew') {
      return `${date.day} ${date.monthName} ${date.year}`;
    } else {
      const hebrewMonthRussian = hebrewMonthsRussian[date.month - 1];
      return `${date.day} ${hebrewMonthRussian} ${date.year}`;
    }
  };
  
  // תרגום יחס משפחתי לרוסית
  const relationToRussian = (relation: string): string => {
    const relations: {[key: string]: string} = {
      'father': 'Отец',
      'mother': 'Мать',
      'grandfather': 'Дедушка',
      'grandmother': 'Бабушка',
      'brother': 'Брат',
      'sister': 'Сестра',
      'son': 'Сын',
      'daughter': 'Дочь',
      'husband': 'Муж',
      'wife': 'Жена',
      'other': 'Родственник'
    };
    
    return relations[relation] || relation;
  };
  
  return (
    <div className="min-h-screen bg-gray-50 p-4">
      <div className="max-w-4xl mx-auto">
        {/* כותרת */}
        <div className="bg-white p-4 rounded-lg shadow-sm flex items-center justify-between mb-4">
          <div className="flex items-center gap-2">
            <Calendar size={20} className="text-blue-600" />
            <h1 className="text-xl font-bold">Еврейский календарь</h1>
          </div>
          
          <div className="flex gap-2">
            <button 
              className={`px-3 py-1 rounded-lg text-sm ${displayLanguage === 'russian' ? 'bg-blue-600 text-white' : 'bg-gray-100'}`}
              onClick={() => setDisplayLanguage('russian')}
            >
              Русский
            </button>
            <button 
              className={`px-3 py-1 rounded-lg text-sm ${displayLanguage === 'hebrew' ? 'bg-blue-600 text-white' : 'bg-gray-100'}`}
              onClick={() => setDisplayLanguage('hebrew')}
            >
              עברית
            </button>
          </div>
        </div>
        
        {/* לוח השנה */}
        <div className="bg-white rounded-lg shadow-sm overflow-hidden mb-4">
          {/* ניווט חודשים */}
          <div className="p-4 flex items-center justify-between border-b">
            <button 
              className="p-2 rounded-full hover:bg-gray-100"
              onClick={prevMonth}
            >
              <ChevronLeft size={20} />
            </button>
            <h2 className="text-lg font-bold">{formatMonthName(currentDate)}</h2>
            <button 
              className="p-2 rounded-full hover:bg-gray-100"
              onClick={nextMonth}
            >
              <ChevronRight size={20} />
            </button>
          </div>
          
          {/* ימי שבוע */}
          <div className="grid grid-cols-7 bg-gray-50 text-sm font-medium text-gray-500">
            {daysOfWeekRussian.map(day => (
              <div key={day} className="p-2 text-center">{day}</div>
            ))}
          </div>
          
          {/* ימי החודש */}
          <div className="grid grid-cols-7">
            {calendarDays.map((day, index) => (
              <div 
                key={index}
                className={`p-2 border-t border-r relative min-h-[80px] ${
                  day.isCurrentMonth ? 'bg-white' : 'bg-gray-50 text-gray-400'
                } ${
                  day.isToday ? 'font-bold' : ''
                } ${
                  day.gregorianDate.getDay() === 6 ? 'bg-blue-50' : ''
                }`}
                onClick={() => selectDay(day)}
              >
                {/* תאריך גרגוריאני */}
                <div className="text-sm">{day.gregorianDate.getDate()}</div>
                
                {/* תאריך עברי */}
                <div className="text-xs text-gray-500">
                  {day.hebrewDate.day}
                </div>
                
                {/* סימון ליארצייט */}
                {day.events.length > 0 && (
                  <div className="absolute top-1 right-1 w-2 h-2 rounded-full bg-red-500"></div>
                )}
                
                {/* סימון לחגים */}
                {holidays.some(h => 
                  h.hebrewDate.day === day.hebrewDate.day && 
                  h.hebrewDate.month === day.hebrewDate.month
                ) && (
                  <div className="mt-1">
                    <span className="px-1 py-0.5 text-xs bg-blue-100 text-blue-800 rounded">
                      {holidays.find(h => 
                        h.hebrewDate.day === day.hebrewDate.day && 
                        h.hebrewDate.month === day.hebrewDate.month
                      )?.name[displayLanguage === 'hebrew' ? 'hebrew' : 'russian']}
                    </span>
                  </div>
                )}
                
                {/* רשימת אירועי יארצייט */}
                {day.events.length > 0 && (
                  <div className="mt-1 space-y-1">
                    {day.events.map((event, i) => (
                      <div 
                        key={i}
                        className="px-1 py-0.5 text-xs bg-red-50 text-red-800 rounded truncate"
                        title={event.name[displayLanguage === 'hebrew' ? 'hebrew' : 'russian']}
                      >
                        {event.name[displayLanguage === 'hebrew' ? 'hebrew' : 'russian'].substring(0, 10)}
                        {event.name[displayLanguage === 'hebrew' ? 'hebrew' : 'russian'].length > 10 ? '...' : ''}
                      </div>
                    ))}
                  </div>
                )}
              </div>
            ))}
          </div>
        </div>
        
        {/* פרטי יום נבחר */}
        {selectedDay && (
          <div className="bg-white rounded-lg shadow-sm p-4 mb-4">
            <h2 className="text-lg font-bold mb-3 flex items-center justify-between">
              <span>
                {selectedDay.gregorianDate.getDate()} {
                  new Intl.DateTimeFormat('ru-RU', { month: 'long' }).format(selectedDay.gregorianDate)
                } {selectedDay.gregorianDate.getFullYear()}
              </span>
              <span className="text-sm font-normal text-gray-500">
                {formatHebrewDate(selectedDay.hebrewDate)}
              </span>
            </h2>
            
            {/* חגים */}
            {holidays.some(h => 
              h.hebrewDate.day === selectedDay.hebrewDate.day && 
              h.hebrewDate.month === selectedDay.hebrewDate.month
            ) && (
              <div className="mb-4">
                <h3 className="font-bold text-blue-800 mb-2">Праздники</h3>
                {holidays
                  .filter(h => 
                    h.hebrewDate.day === selectedDay.hebrewDate.day && 
                    h.hebrewDate.month === selectedDay.hebrewDate.month
                  )
                  .map(holiday => (
                    <div key={holiday.id} className="p-3 bg-blue-50 rounded-lg mb-2">
                      <div className="font-bold">
                        {holiday.name[displayLanguage === 'hebrew' ? 'hebrew' : 'russian']}
                      </div>
                      {holiday.description && (
                        <div className="text-sm text-gray-700 mt-1">
                          {holiday.description}
                        </div>
                      )}
                    </div>
                  ))
                }
              </div>
            )}
            
            {/* יארצייט */}
            {selectedDay.events.length > 0 ? (
              <div>
                <h3 className="font-bold text-red-800 mb-2">Йорцайт</h3>
                {selectedDay.events.map(event => (
                  <div key={event.id} className="p-3 bg-red-50 rounded-lg mb-2">
                    <div className="font-bold">
                      {event.name[displayLanguage === 'hebrew' ? 'hebrew' : 'russian']}
                    </div>
                    <div className="text-sm text-gray-700 mt-1 flex justify-between">
                      <span>{relationToRussian(event.relation)}</span>
                      <span>
                        Дата смерти: {formatHebrewDate(event.hebrewDate)}
                      </span>
                    </div>
                    <div className="mt-2 flex gap-2">
                      <button className="px-3 py-1 text-sm bg-blue-600 text-white rounded-lg">
                        Молитвы
                      </button>
                      <button className="px-3 py-1 text-sm border border-gray-300 rounded-lg">
                        Напоминание
                      </button>
                    </div>
                  </div>
                ))}
              </div>
            ) : (
              <div className="text-center py-4 text-gray-500">
                {selectedDay.gregorianDate.getDay() === 6 ? (
                  <div>
                    <div className="font-bold mb-1">Шаббат</div>
                    <div className="text-sm">Суббота - святой день в иудаизме, день отдыха и духовного обновления</div>
                  </div>
                ) : (
                  <div>
                    <div className="mb-2">Нет событий в этот день</div>
                    <button className="px-3 py-1 text-sm bg-blue-600 text-white rounded-lg flex items-center gap-1 mx-auto">
                      <Plus size={16} /> Добавить йорцайт
                    </button>
                  </div>
                )}
              </div>
            )}
          </div>
        )}
        
        {/* לגנדה */}
        <div className="bg-white rounded-lg shadow-sm p-4 mb-4">
          <div className="flex items-center gap-2 mb-2">
            <Info size={16} className="text-blue-600" />
            <h3 className="font-bold">Обозначения</h3>
          </div>
          
          <div className="grid grid-cols-2 gap-2 text-sm">
            <div className="flex items-center gap-2">
              <div className="w-3 h-3 rounded-full bg-red-500"></div>
              <span>Йорцайт (годовщина смерти)</span>
            </div>
            <div className="flex items-center gap-2">
              <div className="px-1 bg-blue-100 text-blue-800 rounded text-xs">текст</div>
              <span>Еврейский праздник</span>
            </div>
            <div className="flex items-center gap-2">
              <div className="w-3 h-3 bg-blue-50"></div>
              <span>Шаббат (суббота)</span>
            </div>
            <div className="flex items-center gap-2">
              <div className="font-bold text-xs">22</div>
              <span>Сегодняшний день</span>
            </div>
          </div>
        </div>
        
        {/* כפתורי פעולה */}
        <div className="flex justify-center gap-2">
          <button className="px-4 py-2 bg-blue-600 text-white rounded-lg flex items-center gap-1">
            <Plus size={16} /> Добавить Йорцайт
          </button>
          <button className="px-4 py-2 border border-gray-300 rounded-lg flex items-center gap-1">
            <User size={16} /> Мои напоминания
          </button>
        </div>
      </div>
    </div>
  );
};

export default HebrewCalendar;<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Тикун Ха-Шем - Платформа для молитв и псалмов</title>
  <style>
    /* бסיס */
    @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=PT+Serif:wght@400;700&family=Frank+Ruhl+Libre:wght@400;700&display=swap');
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    :root {
      --primary: #4361ee;
      --primary-light: #4895ef;
      --primary-dark: #3a56d4;
      --secondary: #10b981;
      --background: #f8f9fa;
      --card: #ffffff;
      --text: #212529;
      --text-light: #6c757d;
      --border: #dee2e6;
      --shadow-sm: 0 2px 8px rgba(0,0,0,0.05);
      --shadow-md: 0 4px 12px rgba(0,0,0,0.08);
      --radius-sm: 6px;
      --radius: 12px;
      --radius-lg: 20px;
      --header-height: 70px;
      --bottom-nav-height: 65px;
      --content-padding: 16px;
      --base-font-size: 16px;
      --hebrew-font: 'Frank Ruhl Libre', serif;
      --russian-font: 'PT Serif', serif;
    }
    
    [data-theme="dark"] {
      --primary: #4895ef;
      --primary-light: #4361ee;
      --primary-dark: #3a56d4;
      --secondary: #10b981;
      --background: #121212;
      --card: #1e1e1e;
      --text: #e0e0e0;
      --text-light: #a0a0a0;
      --border: #2d2d2d;
      --shadow-sm: 0 2px 8px rgba(0,0,0,0.2);
      --shadow-md: 0 4px 12px rgba(0,0,0,0.25);
    }
    
    body {
      font-family: 'Roboto', sans-serif;
      background-color: var(--background);
      color: var(--text);
      line-height: 1.5;
      font-size: var(--base-font-size);
      padding-bottom: var(--bottom-nav-height);
      padding-top: var(--header-height);
      transition: background-color 0.3s, color 0.3s;
    }
    
    h1, h2, h3, h4, h5, h6 {
      font-weight: 700;
      line-height: 1.3;
    }
    
    a {
      text-decoration: none;
      color: inherit;
    }
    
    /* כותרת */
    .header {
      position: fixed;
      top: 0;
      right: 0;
      left: 0;
      height: var(--header-height);
      background-color: var(--card);
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 var(--content-padding);
      box-shadow: var(--shadow-sm);
      z-index: 100;
      transition: background-color 0.3s;
    }
    
    .header-title {
      font-weight: 700;
      font-size: 20px;
    }
    
    .header-actions {
      display: flex;
      gap: 12px;
    }
    
    .icon-btn {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background-color: var(--background);
      color: var(--text);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      border: none;
      cursor: pointer;
      transition: background-color 0.2s;
    }
    
    .icon-btn:hover {
      background-color: var(--primary-light);
      color: white;
    }
    
    /* תוכן */
    .container {
      padding: var(--content-padding);
      max-width: 1200px;
      margin: 0 auto;
    }
    
    /* חלק גיבור */
    .hero {
      background-color: var(--primary);
      color: white;
      padding: 40px var(--content-padding);
      border-radius: var(--radius);
      margin-bottom: 30px;
      text-align: center;
      position: relative;
      overflow: hidden;
      background-image: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    }
    
    .hero::before {
      content: '';
      position: absolute;
      top: -10%;
      right: -10%;
      width: 200px;
      height: 200px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.1);
      z-index: 0;
    }
    
    .hero::after {
      content: '';
      position: absolute;
      bottom: -10%;
      left: -10%;
      width: 150px;
      height: 150px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.1);
      z-index: 0;
    }
    
    .hero-content {
      position: relative;
      z-index: 1;
    }
    
    .hero-title {
      font-size: 32px;
      font-weight: 700;
      margin-bottom: 16px;
    }
    
    .hero-subtitle {
      font-size: 18px;
      margin-bottom: 24px;
      opacity: 0.9;
    }
    
    .hebrew-text {
      font-family: var(--hebrew-font);
      direction: rtl;
    }
    
    /* כפתורים */
    .button {
      display: inline-block;
      padding: 12px 24px;
      border-radius: var(--radius-sm);
      font-weight: 600;
      font-size: 16px;
      text-align: center;
      cursor: pointer;
      transition: all 0.2s;
      border: none;
    }
    
    .button-primary {
      background-color: white;
      color: var(--primary);
    }
    
    .button-primary:hover {
      background-color: rgba(255, 255, 255, 0.9);
      transform: translateY(-2px);
    }
    
    .button-outline {
      background-color: transparent;
      color: white;
      border: 2px solid white;
    }
    
    .button-outline:hover {
      background-color: rgba(255, 255, 255, 0.1);
      transform: translateY(-2px);
    }
    
    .button-group {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      justify-content: center;
    }
    
    /* רכיבי גישה מהירה */
    .quick-access {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 16px;
      margin-bottom: 30px;
    }
    
    @media (min-width: 768px) {
      .quick-access {
        grid-template-columns: repeat(4, 1fr);
      }
    }
    
    .quick-access-card {
      background-color: var(--card);
      border-radius: var(--radius);
      padding: 20px;
      text-align: center;
      box-shadow: var(--shadow-sm);
      transition: transform 0.2s, box-shadow 0.2s;
      cursor: pointer;
    }
    
    .quick-access-card:hover {
      transform: translateY(-5px);
      box-shadow: var(--shadow-md);
    }
    
    .quick-access-icon {
      font-size: 32px;
      margin-bottom: 12px;
      color: var(--primary);
    }
    
    .quick-access-title {
      font-weight: 600;
      margin-bottom: 8px;
    }
    
    .quick-access-desc {
      font-size: 14px;
      color: var(--text-light);
    }
    
    /* כרטיסיות תכונות */
    .features {
      margin-bottom: 30px;
    }
    
    .section-title {
      font-size: 24px;
      margin-bottom: 20px;
      text-align: center;
    }
    
    .feature-cards {
      display: grid;
      grid-template-columns: 1fr;
      gap: 20px;
    }
    
    @media (min-width: 768px) {
      .feature-cards {
        grid-template-columns: repeat(3, 1fr);
      }
    }
    
    .feature-card {
      background-color: var(--card);
      border-radius: var(--radius);
      padding: 24px;
      box-shadow: var(--shadow-sm);
      transition: transform 0.2s, box-shadow 0.2s;
      position: relative;
      overflow: hidden;
    }
    
    .feature-card:hover {
      transform: translateY(-5px);
      box-shadow: var(--shadow-md);
    }
    
    .feature-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 5px;
      background-color: var(--primary);
    }
    
    .feature-icon {
      width: 60px;
      height: 60px;
      background-color: rgba(67, 97, 238, 0.1);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 28px;
      color: var(--primary);
      margin-bottom: 16px;
    }
    
    .feature-title {
      font-size: 18px;
      margin-bottom: 12px;
    }
    
    .feature-desc {
      color: var(--text-light);
      margin-bottom: 16px;
    }
    
    .feature-link {
      color: var(--primary);
      font-weight: 500;
      display: inline-block;
    }
    
    /* נתונים מספריים */
    .stats {
      background-color: var(--card);
      border-radius: var(--radius);
      padding: 30px;
      margin-bottom: 30px;
      box-shadow: var(--shadow-sm);
      text-align: center;
    }
    
    .stats-title {
      font-size: 24px;
      margin-bottom: 24px;
    }
    
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
    }
    
    @media (min-width: 768px) {
      .stats-grid {
        grid-template-columns: repeat(4, 1fr);
      }
    }
    
    .stat-item {
      padding: 16px;
    }
    
    .stat-value {
      font-size: 36px;
      font-weight: 700;
      color: var(--primary);
      margin-bottom: 8px;
    }
    
    .stat-label {
      font-size: 15px;
      color: var(--text-light);
    }
    
    /* כרטיסים קטנים */
    .cards-row {
      display: grid;
      grid-template-columns: 1fr;
      gap: 20px;
      margin-bottom: 30px;
    }
    
    @media (min-width: 768px) {
      .cards-row {
        grid-template-columns: repeat(2, 1fr);
      }
    }
    
    .small-card {
      background-color: var(--card);
      border-radius: var(--radius);
      padding: 24px;
      box-shadow: var(--shadow-sm);
      display: flex;
      align-items: flex-start;
      gap: 16px;
      transition: transform 0.2s, box-shadow 0.2s;
    }
    
    .small-card:hover {
      transform: translateY(-3px);
      box-shadow: var(--shadow-md);
    }
    
    .small-card-icon {
      width: 50px;
      height: 50px;
      background-color: rgba(67, 97, 238, 0.1);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      color: var(--primary);
      flex-shrink: 0;
    }
    
    .small-card-content {
      flex: 1;
    }
    
    .small-card-title {
      font-size: 18px;
      margin-bottom: 8px;
    }
    
    .small-card-desc {
      font-size: 14px;
      color: var(--text-light);
      margin-bottom: 12px;
    }
    
    .small-card-link {
      color: var(--primary);
      font-weight: 500;
      font-size: 14px;
    }
    
    /* טפסים */
    .form-card {
      background-color: var(--card);
      border-radius: var(--radius);
      padding: 24px;
      margin-bottom: 30px;
      box-shadow: var(--shadow-sm);
    }
    
    .form-title {
      font-size: 20px;
      margin-bottom: 16px;
      text-align: center;
    }
    
    .form-desc {
      text-align: center;
      color: var(--text-light);
      margin-bottom: 24px;
    }
    
    .form-group {
      margin-bottom: 16px;
    }
    
    .form-label {
      display: block;
      margin-bottom: 8px;
      font-weight: 500;
    }
    
    .form-control {
      width: 100%;
      padding: 12px 16px;
      border: 1px solid var(--border);
      border-radius: var(--radius-sm);
      font-family: inherit;
      font-size: inherit;
      background-color: var(--card);
      color: var(--text);
      transition: border-color 0.2s;
    }
    
    .form-control:focus {
      outline: none;
      border-color: var(--primary);
    }
    
    .form-button {
      width: 100%;
      padding: 14px;
      background-color: var(--primary);
      color: white;
      border: none;
      border-radius: var(--radius-sm);
      font-weight: 600;
      cursor: pointer;
      transition: background-color 0.2s;
      margin-top: 8px;
    }
    
    .form-button:hover {
      background-color: var(--primary-dark);
    }
    
    /* בורר שפה */
    .language-bar {
      display: flex;
      background-color: var(--card);
      border-radius: var(--radius);
      overflow: hidden;
      margin-bottom: 20px;
      box-shadow: var(--shadow-sm);
    }
    
    .language-option {
      flex: 1;
      padding: 12px;
      text-align: center;
      cursor: pointer;
      font-weight: 500;
      transition: background-color 0.2s;
    }
    
    .language-option.active {
      background-color: var(--primary);
      color: white;
    }
    
    /* פרסומות ותזכורות */
    .promo-card {
      background-color: var(--secondary);
      color: white;
      border-radius: var(--radius);
      padding: 24px;
      margin-bottom: 30px;
      position: relative;
      overflow: hidden;
    }
    
    .promo-content {
      position: relative;
      z-index: 1;
    }
    
    .promo-title {
      font-size: 22px;
      margin-bottom: 12px;
    }
    
    .promo-desc {
      opacity: 0.9;
      margin-bottom: 16px;
    }
    
    .promo-button {
      display: inline-block;
      padding: 10px 20px;
      background-color: white;
      color: var(--secondary);
      border-radius: var(--radius-sm);
      font-weight: 600;
      font-size: 14px;
    }
    
    .promo-pattern {
      position: absolute;
      top: 0;
      right: 0;
      width: 150px;
      height: 150px;
      opacity: 0.1;
      background-image: radial-gradient(circle, white 2px, transparent 3px);
      background-size: 20px 20px;
    }
    
    /* ניווט תחתון */
    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      height: var(--bottom-nav-height);
      background-color: var(--card);
      display: flex;
      justify-content: space-around;
      align-items: center;
      box-shadow: 0 -2px 8px rgba(0,0,0,0.08);
      z-index: 100;
      transition: background-color 0.3s;
    }
    
    .bottom-nav-item {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 4px;
      color: var(--text-light);
      transition: color 0.2s;
      padding: 8px 0;
      text-decoration: none;
    }
    
    .bottom-nav-item.active {
      color: var(--primary);
    }
    
    .bottom-nav-icon {
      font-size: 22px;
    }
    
    .bottom-nav-label {
      font-size: 12px;
      font-weight: 500;
    }
    
    /* רגליים */
    .footer {
      text-align: center;
      padding: 20px;
      color: var(--text-light);
      font-size: 14px;
      margin-bottom: var(--bottom-nav-height);
    }
    
    .footer-links {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-bottom: 16px;
    }
    
    .footer-link {
      color: var(--text-light);
      transition: color 0.2s;
    }
    
    .footer-link:hover {
      color: var(--primary);
    }
    
    /* מחשיך מסך */
    .screen-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: rgba(0, 0, 0, 0.6);
      z-index: 150;
      display: none;
      opacity: 0;
      transition: opacity 0.3s;
    }
    
    .screen-overlay.active {
      display: block;
      opacity: 1;
    }
    
    /* מודל / תיבת דו-שיח */
    .modal {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) scale(0.9);
      background-color: var(--card);
      border-radius: var(--radius);
      width: 90%;
      max-width: 500px;
      z-index: 200;
      display: none;
      opacity: 0;
      transition: transform 0.3s, opacity 0.3s;
    }
    
    .modal.active {
      display: block;
      opacity: 1;
      transform: translate(-50%, -50%) scale(1);
    }
    
    .modal-header {
      padding: 16px 20px;
      border-bottom: 1px solid var(--border);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .modal-title {
      font-weight: 600;
      font-size: 18px;
    }
    
    .modal-close {
      background: none;
      border: none;
      font-size: 24px;
      color: var(--text-light);
      cursor: pointer;
    }
    
    .modal-body {
      padding: 20px;
      max-height: 60vh;
      overflow-y: auto;
    }
    
    .modal-footer {
      padding: 16px 20px;
      border-top: 1px solid var(--border);
      display: flex;
      justify-content: flex-end;
      gap: 12px;
    }
    
    /* חיווי טעינה */
    .loading-indicator {
      display: inline-block;
      width: 30px;
      height: 30px;
      border: 3px solid rgba(67, 97, 238, 0.2);
      border-radius: 50%;
      border-top-color: var(--primary);
      animation: spin 1s ease-in-out infinite;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }
    
    @keyframes spin {
      to { transform: translate(-50%, -50%) rotate(360deg); }
    }
  </style>
</head>
<body>
  <!-- כותרת -->
  <header class="header">
    <div class="header-title">Тикун Ха-Шем</div>
    <div class="header-actions">
      <button class="icon-btn" id="language-toggle">🌐</button>
      <button class="icon-btn" id="theme-toggle">🌙</button>
      <a href="settings.html" class="icon-btn">⚙️</a>
    </div>
  </header>
  
  <!-- תוכן -->
  <div class="container">
    <!-- גיבור -->
    <div class="hero">
      <div class="hero-content">
        <h1 class="hero-title">Тикун Ха-Шем</h1>
        <p class="hero-subtitle">Платформа для молитв, псалмов и еврейских текстов с уважением к святым именам</p>
        <div class="hero-subtitle hebrew-text">תיקון השם - קריאת תהילים ותפילות בקדושה</div>
        <div class="button-group">
          <a href="tehilim.html" class="button button-primary">Начать чтение Техилим</a>
          <a href="memorial.html" class="button button-outline">Молитвы за усопших</a>
        </div>
      </div>
    </div>
    
    <!-- בורר שפה -->
    <div class="language-bar">
      <div class="language-option active" data-lang="ru">Русский</div>
      <div class="language-option" data-lang="he">עברית</div>
      <div class="language-option" data-lang="phonetic">Фонетика</div>
    </div>
    
    <!-- גישה מהירה -->
    <div class="quick-access">
      <a href="tehilim.html" class="quick-access-card">
        <div class="quick-access-icon">📖</div>
        <div class="quick-access-title">Техилим</div>
        <div class="quick-access-desc">Псалмы Давида</div>
      </a>
      <a href="siddur.html" class="quick-access-card">
        <div class="quick-access-icon">📝</div>
        <div class="quick-access-title">Молитвенник</div>
        <div class="quick-access-desc">Сидур на каждый день</div>
      </a>
      <a href="memorial.html" class="quick-access-card">
        <div class="quick-access-icon">🕯️</div>
        <div class="quick-access-title">За усопших</div>
        <div class="quick-access-desc">Йорцайт и молитвы</div>
      </a>
      <a href="correct-text.html" class="quick-access-card">
        <div class="quick-access-icon">✏️</div>
        <div class="quick-access-title">Исправление</div>
        <div class="quick-access-desc">Текст с именами Б-га</div>
      </a>
    </div>
    
    <!-- תכונות עיקריות -->
    <section class="features">
      <h2 class="section-title">Особенности нашей платформы</h2>
      <div class="feature-cards">
        <div class="feature-card">
          <div class="feature-icon">📖</div>
          <h3 class="feature-title">Псалмы на трех языках</h3>
          <p class="feature-desc">Читайте Техилим на иврите, русском или с транслитерацией в удобном и красивом интерфейсе.</p>
          <a href="tehilim.html" class="feature-link">Открыть Техилим →</a>
        </div>
        <div class="feature-card">
          <div class="feature-icon">✏️</div>
          <h3 class="feature-title">Исправление имён Всевышнего</h3>
          <p class="feature-desc">Автоматическое исправление текстов с корректной заменой имен Всевышнего согласно еврейской традиции.</p>
          <a href="correct-text.html" class="feature-link">Исправить текст →</a>
        </div>
        <div class="feature-card">
          <div class="feature-icon">🕯️</div>
          <h3 class="feature-title">Йорцайт-календарь</h3>
          <p class="feature-desc">Управляйте годовщинами смерти близких, получайте напоминания и читайте соответствующие молитвы.</p>
          <a href="memorial.html" class="feature-link">Перейти к календарю →</a>
        </div>
      </div>
    </section>
    
    <!-- פרסומת / קידום -->
    <div class="promo-card">
      <div class="promo-pattern"></div>
      <div class="promo-content">
        <h3 class="promo-title">Новая функция: Молитва по буквам имени</h3>
        <p class="promo-desc">Псалом 119 содержит стихи для каждой буквы еврейского алфавита. Теперь вы можете выбрать стихи, соответствующие буквам имени усопшего.</p>
        <a href="psalm119.html" class="promo-button">Попробовать</a>
      </div>
    </div>
    
    <!-- טפסים עבור נפטרים -->
    <div class="form-card">
      <h3 class="form-title">Молитва за усопшего</h3>
      <p class="form-desc">Введите имя усопшего, чтобы получить специальную подборку псалмов</p>
      
      <div class="form-group">
        <label class="form-label">Имя усопшего (на иврите):</label>
        <input type="text" class="form-control" id="deceased-name" placeholder="שם הנפטר" dir="rtl">
      </div>
      <div class="form-group">
        <label class="form-label">Имя матери усопшего (на иврите):</label>
        <input type="text" class="form-control" id="mother-name" placeholder="שם האם" dir="rtl">
      </div>
      <button class="form-button" id="generate-prayer">Получить псалмы для чтения</button>
    </div>
    
    <!-- נתונים מספריים -->
    <div class="stats">
      <h3 class="stats-title">Наша библиотека</h3>
      <div class="stats-grid">
        <div class="stat-item">
          <div class="stat-value">150</div>
          <div class="stat-label">Псалмов</div>
        </div>
        <div class="stat-item">
          <div class="stat-value">50+</div>
          <div class="stat-label">Молитв</div>
        </div>
        <div class="stat-item">
          <div class="stat-value">3</div>
          <div class="stat-label">Языка</div>
        </div>
        <div class="stat-item">
          <div class="stat-value">10K+</div>
          <div class="stat-label">Пользователей</div>
        </div><!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Тикун Ха-Шем - Платформа для молитв и псалмов</title>
  <style>
    /* бסיס */
    @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=PT+Serif:wght@400;700&family=Frank+Ruhl+Libre:wght@400;700&display=swap');
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    :root {
      --primary: #4361ee;
      --primary-light: #4895ef;
      --primary-dark: #3a56d4;
      --secondary: #10b981;
      --background: #f8f9fa;
      --card: #ffffff;
      --text: #212529;
      --text-light: #6c757d;
      --border: #dee2e6;
      --shadow-sm: 0 2px 8px rgba(0,0,0,0.05);
      --shadow-md: 0 4px 12px rgba(0,0,0,0.08);
      --radius-sm: 6px;
      --radius: 12px;
      --radius-lg: 20px;
      --header-height: 70px;
      --bottom-nav-height: 65px;
      --content-padding: 16px;
      --base-font-size: 16px;
      --hebrew-font: 'Frank Ruhl Libre', serif;
      --russian-font: 'PT Serif', serif;
    }
    
    [data-theme="dark"] {
      --primary: #4895ef;
      --primary-light: #4361ee;
      --primary-dark: #3a56d4;
      --secondary: #10b981;
      --background: #121212;
      --card: #1e1e1e;
      --text: #e0e0e0;
      --text-light: #a0a0a0;
      --border: #2d2d2d;
      --shadow-sm: 0 2px 8px rgba(0,0,0,0.2);
      --shadow-md: 0 4px 12px rgba(0,0,0,0.25);
    }
    
    body {
      font-family: 'Roboto', sans-serif;
      background-color: var(--background);
      color: var(--text);
      line-height: 1.5;
      font-size: var(--base-font-size);
      padding-bottom: var(--bottom-nav-height);
      padding-top: var(--header-height);
      transition: background-color 0.3s, color 0.3s;
    }
    
    h1, h2, h3, h4, h5, h6 {
      font-weight: 700;
      line-height: 1.3;
    }
    
    a {
      text-decoration: none;
      color: inherit;
    }
    
    /* כותרת */
    .header {
      position: fixed;
      top: 0;
      right: 0;
      left: 0;
      height: var(--header-height);
      background-color: var(--card);
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 var(--content-padding);
      box-shadow: var(--shadow-sm);
      z-index: 100;
      transition: background-color 0.3s;
    }
    
    .header-title {
      font-weight: 700;
      font-size: 20px;
    }
    
    .header-actions {
      display: flex;
      gap: 12px;
    }
    
    .icon-btn {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background-color: var(--background);
      color: var(--text);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      border: none;
      cursor: pointer;
      transition: background-color 0.2s;
    }
    
    .icon-btn:hover {
      background-color: var(--primary-light);
      color: white;
    }
    
    /* תוכן */
    .container {
      padding: var(--content-padding);
      max-width: 1200px;
      margin: 0 auto;
    }
    
    /* חלק גיבור */
    .hero {
      background-color: var(--primary);
      color: white;
      padding: 40px var(--content-padding);
      border-radius: var(--radius);
      margin-bottom: 30px;
      text-align: center;
      position: relative;
      overflow: hidden;
      background-image: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    }
    
    .hero::before {
      content: '';
      position: absolute;
      top: -10%;
      right: -10%;
      width: 200px;
      height: 200px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.1);
      z-index: 0;
    }
    
    .hero::after {
      content: '';
      position: absolute;
      bottom: -10%;
      left: -10%;
      width: 150px;
      height: 150px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.1);
      z-index: 0;
    }
    
    .hero-content {
      position: relative;
      z-index: 1;
    }
    
    .hero-title {
      font-size: 32px;
      font-weight: 700;
      margin-bottom: 16px;
    }
    
    .hero-subtitle {
      font-size: 18px;
      margin-bottom: 24px;
      opacity: 0.9;
    }
    
    .hebrew-text {
      font-family: var(--hebrew-font);
      direction: rtl;
    }
    
    /* כפתורים */
    .button {
      display: inline-block;
      padding: 12px 24px;
      border-radius: var(--radius-sm);
      font-weight: 600;
      font-size: 16px;
      text-align: center;
      cursor: pointer;
      transition: all 0.2s;
      border: none;
    }
    
    .button-primary {
      background-color: white;
      color: var(--primary);
    }
    
    .button-primary:hover {
      background-color: rgba(255, 255, 255, 0.9);
      transform: translateY(-2px);
    }
    
    .button-outline {
      background-color: transparent;
      color: white;
      border: 2px solid white;
    }
    
    .button-outline:hover {
      background-color: rgba(255, 255, 255, 0.1);
      transform: translateY(-2px);
    }
    
    .button-group {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      justify-content: center;
    }
    
    /* רכיבי גישה מהירה */
    .quick-access {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 16px;
      margin-bottom: 30px;
    }
    
    @media (min-width: 768px) {
      .quick-access {
        grid-template-columns: repeat(4, 1fr);
      }
    }
    
    .quick-access-card {
      background-color: var(--card);
      border-radius: var(--radius);
      padding: 20px;
      text-align: center;
      box-shadow: var(--shadow-sm);
      transition: transform 0.2s, box-shadow 0.2s;
      cursor: pointer;
    }
    
    .quick-access-card:hover {
      transform: translateY(-5px);
      box-shadow: var(--shadow-md);
    }
    
    .quick-access-icon {
      font-size: 32px;
      margin-bottom: 12px;
      color: var(--primary);
    }
    
    .quick-access-title {
      font-weight: 600;
      margin-bottom: 8px;
    }
    
    .quick-access-desc {
      font-size: 14px;
      color: var(--text-light);
    }
    
    /* כרטיסיות תכונות */
    .features {
      margin-bottom: 30px;
    }
    
    .section-title {
      font-size: 24px;
      margin-bottom: 20px;
      text-align: center;
    }
    
    .feature-cards {
      display: grid;
      grid-template-columns: 1fr;
      gap: 20px;
    }
    
    @media (min-width: 768px) {
      .feature-cards {
        grid-template-columns: repeat(3, 1fr);
      }
    }
    
    .feature-card {
      background-color: var(--card);
      border-radius: var(--radius);
      padding: 24px;
      box-shadow: var(--shadow-sm);
      transition: transform 0.2s, box-shadow 0.2s;
      position: relative;
      overflow: hidden;
    }
    
    .feature-card:hover {
      transform: translateY(-5px);
      box-shadow: var(--shadow-md);
    }
    
    .feature-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 5px;
      background-color: var(--primary);
    }
    
    .feature-icon {
      width: 60px;
      height: 60px;
      background-color: rgba(67, 97, 238, 0.1);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 28px;
      color: var(--primary);
      margin-bottom: 16px;
    }
    
    .feature-title {
      font-size: 18px;
      margin-bottom: 12px;
    }
    
    .feature-desc {
      color: var(--text-light);
      margin-bottom: 16px;
    }
    
    .feature-link {
      color: var(--primary);
      font-weight: 500;
      display: inline-block;
    }
    
    /* נתונים מספריים */
    .stats {
      background-color: var(--card);
      border-radius: var(--radius);
      padding: 30px;
      margin-bottom: 30px;
      box-shadow: var(--shadow-sm);
      text-align: center;
    }
    
    .stats-title {
      font-size: 24px;
      margin-bottom: 24px;
    }
    
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
    }
    
    @media (min-width: 768px) {
      .stats-grid {
        grid-template-columns: repeat(4, 1fr);
      }
    }
    
    .stat-item {
      padding: 16px;
    }
    
    .stat-value {
      font-size: 36px;
      font-weight: 700;
      color: var(--primary);
      margin-bottom: 8px;
    }
    
    .stat-label {
      font-size: 15px;
      color: var(--text-light);
    }
    
    /* כרטיסים קטנים */
    .cards-row {
      display: grid;
      grid-template-columns: 1fr;
      gap: 20px;
      margin-bottom: 30px;
    }
    
    @media (min-width: 768px) {
      .cards-row {
        grid-template-columns: repeat(2, 1fr);
      }
    }
    
    .small-card {
      background-color: var(--card);
      border-radius: var(--radius);
      padding: 24px;
      box-shadow: var(--shadow-sm);
      display: flex;
      align-items: flex-start;
      gap: 16px;
      transition: transform 0.2s, box-shadow 0.2s;
    }
    
    .small-card:hover {
      transform: translateY(-3px);
      box-shadow: var(--shadow-md);
    }
    
    .small-card-icon {
      width: 50px;
      height: 50px;
      background-color: rgba(67, 97, 238, 0.1);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      color: var(--primary);
      flex-shrink: 0;
    }
    
    .small-card-content {
      flex: 1;
    }
    
    .small-card-title {
      font-size: 18px;
      margin-bottom: 8px;
    }
    
    .small-card-desc {
      font-size: 14px;
      color: var(--text-light);
      margin-bottom: 12px;
    }
    
    .small-card-link {
      color: var(--primary);
      font-weight: 500;
      font-size: 14px;
    }
    
    /* טפסים */
    .form-card {
      background-color: var(--card);
      border-radius: var(--radius);
      padding: 24px;
      margin-bottom: 30px;
      box-shadow: var(--shadow-sm);
    }
    
    .form-title {
      font-size: 20px;
      margin-bottom: 16px;
      text-align: center;
    }
    
    .form-desc {
      text-align: center;
      color: var(--text-light);
      margin-bottom: 24px;
    }
    
    .form-group {
      margin-bottom: 16px;
    }
    
    .form-label {
      display: block;
      margin-bottom: 8px;
      font-weight: 500;
    }
    
    .form-control {
      width: 100%;
      padding: 12px 16px;
      border: 1px solid var(--border);
      border-radius: var(--radius-sm);
      font-family: inherit;
      font-size: inherit;
      background-color: var(--card);
      color: var(--text);
      transition: border-color 0.2s;
    }
    
    .form-control:focus {
      outline: none;
      border-color: var(--primary);
    }
    
    .form-button {
      width: 100%;
      padding: 14px;
      background-color: var(--primary);
      color: white;
      border: none;
      border-radius: var(--radius-sm);
      font-weight: 600;
      cursor: pointer;
      transition: background-color 0.2s;
      margin-top: 8px;
    }
    
    .form-button:hover {
      background-color: var(--primary-dark);
    }
    
    /* בורר שפה */
    .language-bar {
      display: flex;
      background-color: var(--card);
      border-radius: var(--radius);
      overflow: hidden;
      margin-bottom: 20px;
      box-shadow: var(--shadow-sm);
    }
    
    .language-option {
      flex: 1;
      padding: 12px;
      text-align: center;
      cursor: pointer;
      font-weight: 500;
      transition: background-color 0.2s;
    }
    
    .language-option.active {
      background-color: var(--primary);
      color: white;
    }
    
    /* פרסומות ותזכורות */
    .promo-card {
      background-color: var(--secondary);
      color: white;
      border-radius: var(--radius);
      padding: 24px;
      margin-bottom: 30px;
      position: relative;
      overflow: hidden;
    }
    
    .promo-content {
      position: relative;
      z-index: 1;
    }
    
    .promo-title {
      font-size: 22px;
      margin-bottom: 12px;
    }
    
    .promo-desc {
      opacity: 0.9;
      margin-bottom: 16px;
    }
    
    .promo-button {
      display: inline-block;
      padding: 10px 20px;
      background-color: white;
      color: var(--secondary);
      border-radius: var(--radius-sm);
      font-weight: 600;
      font-size: 14px;
    }
    
    .promo-pattern {
      position: absolute;
      top: 0;
      right: 0;
      width: 150px;
      height: 150px;
      opacity: 0.1;
      background-image: radial-gradient(circle, white 2px, transparent 3px);
      background-size: 20px 20px;
    }
    
    /* ניווט תחתון */
    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      height: var(--bottom-nav-height);
      background-color: var(--card);
      display: flex;
      justify-content: space-around;
      align-items: center;
      box-shadow: 0 -2px 8px rgba(0,0,0,0.08);
      z-index: 100;
      transition: background-color 0.3s;
    }
    
    .bottom-nav-item {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 4px;
      color: var(--text-light);
      transition: color 0.2s;
      padding: 8px 0;
      text-decoration: none;
    }
    
    .bottom-nav-item.active {
      color: var(--primary);
    }
    
    .bottom-nav-icon {
      font-size: 22px;
    }
    
    .bottom-nav-label {
      font-size: 12px;
      font-weight: 500;
    }
    
    /* רגליים */
    .footer {
      text-align: center;
      padding: 20px;
      color: var(--text-light);
      font-size: 14px;
      margin-bottom: var(--bottom-nav-height);
    }
    
    .footer-links {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-bottom: 16px;
    }
    
    .footer-link {
      color: var(--text-light);
      transition: color 0.2s;
    }
    
    .footer-link:hover {
      color: var(--primary);
    }
    
    /* מחשיך מסך */
    .screen-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: rgba(0, 0, 0, 0.6);
      z-index: 150;
      display: none;
      opacity: 0;
      transition: opacity 0.3s;
    }
    
    .screen-overlay.active {
      display: block;
      opacity: 1;
    }
    
    /* מודל / תיבת דו-שיח */
    .modal {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) scale(0.9);
      background-color: var(--card);
      border-radius: var(--radius);
      width: 90%;
      max-width: 500px;
      z-index: 200;
      display: none;
      opacity: 0;
      transition: transform 0.3s, opacity 0.3s;
    }
    
    .modal.active {
      display: block;
      opacity: 1;
      transform: translate(-50%, -50%) scale(1);
    }
    
    .modal-header {
      padding: 16px 20px;
      border-bottom: 1px solid var(--border);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .modal-title {
      font-weight: 600;
      font-size: 18px;
    }
    
    .modal-close {
      background: none;
      border: none;
      font-size: 24px;
      color: var(--text-light);
      cursor: pointer;
    }
    
    .modal-body {
      padding: 20px;
      max-height: 60vh;
      overflow-y: auto;
    }
    
    .modal-footer {
      padding: 16px 20px;
      border-top: 1px solid var(--border);
      display: flex;
      justify-content: flex-end;
      gap: 12px;
    }
    
    /* חיווי טעינה */
    .loading-indicator {
      display: inline-block;
      width: 30px;
      height: 30px;
      border: 3px solid rgba(67, 97, 238, 0.2);
      border-radius: 50%;
      border-top-color: var(--primary);
      animation: spin 1s ease-in-out infinite;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }
    
    @keyframes spin {
      to { transform: translate(-50%, -50%) rotate(360deg); }
    }
  </style>
</head>
<body>
  <!-- כותרת -->
  <header class="header">
    <div class="header-title">Тикун Ха-Шем</div>
    <div class="header-actions">
      <button class="icon-btn" id="language-toggle">🌐</button>
      <button class="icon-btn" id="theme-toggle">🌙</button>
      <a href="settings.html" class="icon-btn">⚙️</a>
    </div>
  </header>
  
  <!-- תוכן -->
  <div class="container">
    <!-- גיבור -->
    <div class="hero">
      <div class="hero-content">
        <h1 class="hero-title">Тикун Ха-Шем</h1>
        <p class="hero-subtitle">Платформа для молитв, псалмов и еврейских текстов с уважением к святым именам</p>
        <div class="hero-subtitle hebrew-text">תיקון השם - קריאת תהילים ותפילות בקדושה</div>
        <div class="button-group">
          <a href="tehilim.html" class="button button-primary">Начать чтение Техилим</a>
          <a href="memorial.html" class="button button-outline">Молитвы за усопших</a>
        </div>
      </div>
    </div>
    
    <!-- מידע נוסף - כרטיסים קטנים -->
    <div class="cards-row">
      <div class="small-card">
        <div class="small-card-icon">🔍</div>
        <div class="small-card-content">
          <h3 class="small-card-title">Поиск по содержанию</h3>
          <p class="small-card-desc">Ищите конкретные фразы или слова в псалмах и молитвах. Находите тексты соответствующие вашим потребностям.</p>
          <a href="#" class="small-card-link" id="open-search-modal">Искать текст</a>
        </div>
      </div>
      <div class="small-card">
        <div class="small-card-icon">👥</div>
        <div class="small-card-content">
          <h3 class="small-card-title">Сообщество чтецов</h3>
          <p class="small-card-desc">Присоединяйтесь к группам, где псалмы читаются совместно для особых целей: выздоровление больных, успех и другие нужды.</p>
          <a href="tehilim-mobile-community.html" class="small-card-link">Присоединиться</a>
        </div>
      </div>
      <div class="small-card">
        <div class="small-card-icon">📱</div>
        <div class="small-card-content">
          <h3 class="small-card-title">Мобильное приложение</h3>
          <p class="small-card-desc">Скачайте наше приложение для iOS и Android, чтобы иметь доступ к техилим и молитвам даже без интернета.</p>
          <a href="#" class="small-card-link">Скоро будет доступно</a>
        </div>
      </div>
      <div class="small-card">
        <div class="small-card-icon">📚</div>
        <div class="small-card-content">
          <h3 class="small-card-title">Библиотека текстов</h3>
          <p class="small-card-desc">Исследуйте обширную коллекцию еврейских текстов: благословения, праздничные молитвы и многое другое.</p>
          <a href="#" class="small-card-link">Открыть библиотеку</a>
        </div>
      </div>
    </div>
    
    <!-- הסבר על הקורקטור -->
    <div class="feature-card" style="margin-bottom: 30px;">
      <div class="feature-icon">⚡</div>
      <h3 class="feature-title">Корректор текста с именами Всевышнего</h3>
      <p class="feature-desc">Наш уникальный инструмент автоматически исправляет имена Всевышнего в текстах в соответствии с еврейской традицией. Загрузите свой текст и получите корректную версию для печати или публикации в интернете.</p>
      
      <div style="display: flex; gap: 10px; margin-top: 20px;">
        <a href="correct-text.html" class="button" style="flex: 1; background-color: var(--primary); color: white; text-align: center;">Исправить текст</a>
        <a href="#" class="button" style="flex: 1; background-color: var(--background); text-align: center;" id="show-correction-info">Узнать больше</a>
      </div>
    </div>
    
    <!-- אודות -->
    <div class="form-card">
      <h3 class="form-title">О проекте Тикун Ха-Шем</h3>
      <p style="text-align: center; margin-bottom: 20px;">
        <span class="hebrew-text" style="font-size: 24px; display: block; margin-bottom: 10px;">תיקון השם</span>
        Проект "Тикун Ха-Шем" создан для того, чтобы помочь русскоязычным евреям читать псалмы и молитвы с соблюдением святости имен Всевышнего.
      </p>
      <p style="text-align: justify; margin-bottom: 15px;">
        Название проекта "Тикун Ха-Шем" (תיקון השם) имеет двойное значение: "исправление имени" и "возвышение души". Мы стремимся предоставить инструменты для правильного написания и произношения священных имен, а также для чтения молитв, возвышающих души усопших.
      </p>
      <p style="text-align: justify;">
        Вы можете читать тексты на иврите, в русском переводе или в фонетической транскрипции – как вам удобнее, сохраняя при этом должное уважение к святости текстов.
      </p>
    </div>
  </div>
  
  <!-- רגליים -->
  <footer class="footer">
    <div class="footer-links">
      <a href="#" class="footer-link">О нас</a>
      <a href="#" class="footer-link">Помощь</a>
      <a href="#" class="footer-link">Контакты</a>
      <a href="#" class="footer-link">Политика конфиденциальности</a>
    </div>
    <div>© 2025 Тикун Ха-Шем. Все права защищены.</div>
  </footer>
  
  <!-- ניווט תחתון -->
  <nav class="bottom-nav">
    <a href="#" class="bottom-nav-item active">
      <div class="bottom-nav-icon">🏠</div>
      <div class="bottom-nav-label">Главная</div>
    </a>
    <a href="tehilim.html" class="bottom-nav-item">
      <div class="bottom-nav-icon">📖</div>
      <div class="bottom-nav-label">Техилим</div>
    </a>
    <a href="memorial.html" class="bottom-nav-item">
      <div class="bottom-nav-icon">🕯️</div>
      <div class="bottom-nav-label">За усопших</div>
    </a>
    <a href="siddur.html" class="bottom-nav-item">
      <div class="bottom-nav-icon">📝</div>
      <div class="bottom-nav-label">Молитвенник</div>
    </a>
  </nav>
  
  <!-- מסך כהה -->
  <div class="screen-overlay" id="screen-overlay"></div>
  
  <!-- מודל חיפוש -->
  <div class="modal" id="search-modal">
    <div class="modal-header">
      <div class="modal-title">Поиск текста</div>
      <button class="modal-close">&times;</button>
    </div>
    <div class="modal-body">
      <div class="form-group">
        <label class="form-label">Что вы хотите найти?</label>
        <input type="text" class="form-control" placeholder="Введите слово или фразу...">
      </div>
      <div class="form-group">
        <label class="form-label">Тип текста</label>
        <select class="form-control">
          <option>Все тексты</option>
          <option>Техилим (Псалмы)</option>
          <option>Молитвы</option>
          <option>Благословения</option>
        </select>
      </div>
      <div class="form-group">
        <label class="form-label">Язык</label>
        <select class="form-control">
          <option>Русский</option>
          <option>Иврит</option>
          <option>Транслитерация</option>
        </select>
      </div>
    </div>
    <div class="modal-footer">
      <button class="button" style="background-color: var(--background); color: var(--text);">Отмена</button>
      <button class="button" style="background-color: var(--primary); color: white;">Искать</button>
    </div>
  </div>
  
  <!-- מודל מידע על תיקון -->
  <div class="modal" id="correction-info-modal">
    <div class="modal-header">
      <div class="modal-title">О корректоре имен Всевышнего</div>
      <button class="modal-close">&times;</button>
    </div>
    <div class="modal-body">
      <p style="margin-bottom: 15px;">
        В еврейской традиции имена Всевышнего обладают святостью и требуют особого уважения. В печатных и электронных материалах принято заменять полные имена особыми формами записи.
      </p>
      
      <h4 style="font-weight: 600; margin-bottom: 10px;">Примеры правильной замены:</h4>
      <ul style="list-style: none; margin-bottom: 15px;">
        <li style="margin-bottom: 5px;">✓ <strong>Б-г</strong> вместо "Бог"</li>
        <li style="margin-bottom: 5px;">✓ <strong>Г-сподь</strong> вместо "Господь"</li>
        <li style="margin-bottom: 5px;">✓ <strong>Вс-вышний</strong> вместо "Всевышний"</li>
        <li style="margin-bottom: 5px;">✓ <strong>ה'</strong> (буква "хей" с апострофом) вместо полного написания</li>
      </ul>
      
      <p style="margin-bottom: 15px;">
        Наш корректор автоматически обнаруживает и исправляет все имена Всевышнего в русских текстах, что особенно важно при подготовке молитвенников, статей или публикаций в интернете.
      </p>
      
      <h4 style="font-weight: 600; margin-bottom: 10px;">Варианты исправления:</h4>
      <ul style="list-style: none; margin-bottom: 15px;">
        <li style="margin-bottom: 5px;">• <strong>С дефисом</strong>: классический метод (Б-г)</li>
        <li style="margin-bottom: 5px;">• <strong>Буквой иврита</strong>: замена на ה' (хей с апострофом)</li>
        <li style="margin-bottom: 5px;">• <strong>Словом</strong>: замена на альтернативные названия (Вс-вышний)</li>
      </ul>
    </div>
    <div class="modal-footer">
      <button class="button" style="background-color: var(--background); color: var(--text);">Закрыть</button>
      <a href="correct-text.html" class="button" style="background-color: var(--primary); color: white;">Перейти к корректору</a>
    </div>
  </div>
  
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // טיפול בהחלפת שפה
      const languageOptions = document.querySelectorAll('.language-option');
      languageOptions.forEach(option => {
        option.addEventListener('click', function() {
          // שינוי האפשרות הפעילה
          languageOptions.forEach(opt => opt.classList.remove('active'));
          this.classList.add('active');
          
          // שמירת השפה הנבחרת
          const selectedLang = this.dataset.lang;
          localStorage.setItem('preferredLanguage', selectedLang);
          
          // במימוש אמיתי, כאן היה קוד להחלפת שפה באתר
          console.log('Выбран язык:', selectedLang);
        });
      });
      
      // טעינת השפה המועדפת השמורה
      const savedLang = localStorage.getItem('preferredLanguage');
      if (savedLang) {
        languageOptions.forEach(opt => {
          if (opt.dataset.lang === savedLang) {
            opt.click();
          }
        });
      }
      
      // טיפול במצב כהה
      const themeToggleBtn = document.getElementById('theme-toggle');
      const isDarkMode = localStorage.getItem('theme') === 'dark';
      
      if (isDarkMode) {
        document.body.setAttribute('data-theme', 'dark');
        themeToggleBtn.textContent = '☀️';
      }
      
      themeToggleBtn.addEventListener('click', function() {
        if (document.body.getAttribute('data-theme') === 'dark') {
          document.body.removeAttribute('data-theme');
          localStorage.setItem('theme', 'light');
          this.textContent = '🌙';
        } else {
          document.body.setAttribute('data-theme', 'dark');
          localStorage.setItem('theme', 'dark');
          this.textContent = '☀️';
        }
      });
      
      // טיפול בטופס תפילה לנפטר
      document.getElementById('generate-prayer').addEventListener('click', function() {
        const deceasedName = document.getElementById('deceased-name').value.trim();
        const motherName = document.getElementById('mother-name').value.trim();
        
        if (!deceasedName) {
          alert('Пожалуйста, введите имя усопшего');
          return;
        }
        
        // הפניה לעמוד תהילים 119 עם פרמטרים בכתובת
        window.location.href = 'psalm119.html?name=' + encodeURIComponent(deceasedName) + 
                             '&mother=' + encodeURIComponent(motherName);
      });
      
      // טיפול במודלים
      const screenOverlay = document.getElementById('screen-overlay');
      const searchModal = document.getElementById('search-modal');
      const correctionInfoModal = document.getElementById('correction-info-modal');
      
      // פתיחה וסגירה של מודל חיפוש
      document.getElementById('open-search-modal').addEventListener('click', function(e) {
        e.preventDefault();
        searchModal.classList.add('active');
        screenOverlay.classList.add('active');
      });
      
      // פתיחה וסגירה של מודל מידע על תיקון
      document.getElementById('show-correction-info').addEventListener('click', function(e) {
        e.preventDefault();
        correctionInfoModal.classList.add('active');
        screenOverlay.classList.add('active');
      });
      
      // סגירת כל המודלים בלחיצה על רקע שחור
      screenOverlay.addEventListener('click', function() {
        document.querySelectorAll('.modal').forEach(modal => {
          modal.classList.remove('active');
        });
        screenOverlay.classList.remove('active');
      });
      
      // סגירת מודל בלחיצה על כפתור סגירה
      document.querySelectorAll('.modal-close').forEach(closeBtn => {
        closeBtn.addEventListener('click', function() {
          this.closest('.modal').classList.remove('active');
          screenOverlay.classList.remove('active');
        });
      });
      
      // סגירת מודל בלחיצה על כפתור ביטול
      document.querySelectorAll('.modal-footer .button').forEach(button => {
        if (button.textContent.trim() === 'Отмена' || button.textContent.trim() === 'Закрыть') {
          button.addEventListener('click', function() {
            this.closest('.modal').classList.remove('active');
            screenOverlay.classList.remove('active');
          });
        }
      });
    });
  </script>
</body>
</html>
    
    <!-- בורר שפה -->
    <div class="language-bar">
      <div class="language-option active" data-lang="ru">Русский</div>
      <div class="language-option" data-lang="he">עברית</div>
      <div class="language-option" data-lang="phonetic">Фонетика</div>
    </div>
    
    <!-- גישה מהירה -->
    <div class="quick-access">
      <a href="tehilim.html" class="quick-access-card">
        <div class="quick-access-icon">📖</div>
        <div class="quick-access-title">Техилим</div>
        <div class="quick-access-desc">Псалмы Давида</div>
      </a>
      <a href="siddur.html" class="quick-access-card">
        <div class="quick-access-icon">📝</div>
        <div class="quick-access-title">Молитвенник</div>
        <div class="quick-access-desc">Сидур на каждый день</div>
      </a>
      <a href="memorial.html" class="quick-access-card">
        <div class="quick-access-icon">🕯️</div>
        <div class="quick-access-title">За усопших</div>
        <div class="quick-access-desc">Йорцайт и молитвы</div>
      </a>
      <a href="correct-text.html" class="quick-access-card">
        <div class="quick-access-icon">✏️</div>
        <div class="quick-access-title">Исправление</div>
        <div class="quick-access-desc">Текст с именами Б-га</div>
      </a>
    </div>
    
    <!-- תכונות עיקריות -->
    <section class="features">
      <h2 class="section-title">Особенности нашей платформы</h2>
      <div class="feature-cards">
        <div class="feature-card">
          <div class="feature-icon">📖</div>
          <h3 class="feature-title">Псалмы на трех языках</h3>
          <p class="feature-desc">Читайте Техилим на иврите, русском или с транслитерацией в удобном и красивом интерфейсе.</p>
          <a href="tehilim.html" class="feature-link">Открыть Техилим →</a>
        </div>
        <div class="feature-card">
          <div class="feature-icon">✏️</div>
          <h3 class="feature-title">Исправление имён Всевышнего</h3>
          <p class="feature-desc">Автоматическое исправление текстов с корректной заменой имен Всевышнего согласно еврейской традиции.</p>
          <a href="correct-text.html" class="feature-link">Исправить текст →</a>
        </div>
        <div class="feature-card">
          <div class="feature-icon">🕯️</div>
          <h3 class="feature-title">Йорцайт-календарь</h3>
          <p class="feature-desc">Управляйте годовщинами смерти близких, получайте напоминания и читайте соответствующие молитвы.</p>
          <a href="memorial.html" class="feature-link">Перейти к календарю →</a>
        </div>
      </div>
    </section>
    
    <!-- פרסומת / קידום -->
    <div class="promo-card">
      <div class="promo-pattern"></div>
      <div class="promo-content">
        <h3 class="promo-title">Новая функция: Молитва по буквам имени</h3>
        <p class="promo-desc">Псалом 119 содержит стихи для каждой буквы еврейского алфавита. Теперь вы можете выбрать стихи, соответствующие буквам имени усопшего.</p>
        <a href="psalm119.html" class="promo-button">Попробовать</a>
      </div>
    </div>
    
    <!-- טפסים עבור נפטרים -->
    <div class="form-card">
      <h3 class="form-title">Молитва за усопшего</h3>
      <p class="form-desc">Введите имя усопшего, чтобы получить специальную подборку псалмов</p>
      
      <div class="form-group">
        <label class="form-label">Имя усопшего (на иврите):</label>
        <input type="text" class="form-control" id="deceased-name" placeholder="שם הנפטר" dir="rtl">
      </div>
      <div class="form-group">
        <label class="form-label">Имя матери усопшего (на иврите):</label>
        <input type="text" class="form-control" id="mother-name" placeholder="שם האם" dir="rtl">
      </div>
      <button class="form-button" id="generate-prayer">Получить псалмы для чтения</button>
    </div>
    
    <!-- נתונים מספריים -->
    <div class="stats">
      <h3 class="stats-title">Наша библиотека</h3>
      <div class="stats-grid">
        <div class="stat-item">
          <div class="stat-value">150</div>
          <div class="stat-label">Псалмов</div>
        </div>
        <div class="stat-item">
          <div class="stat-value">50+</div>
          <div class="stat-label">Молитв</div>
        </div>
        <div class="stat-item">
          <div class="stat-value">3</div>
          <div class="stat-label">Языка</div>
        </div>
        <div class="stat-item">
          <div class="stat-value">10K+</div>
          <div class="stat-label">Пользователей</div>
        </div>אמשיך לפתח את הדף הראשי המשולב של האתר:

הנה! עכשיו סיימתי את הדף הראשי המשולב שמחבר את כל החלקים של האתר שלך יחד. הדף הזה כולל:

1. **אזור גיבור עם כפתורים לפעולה** - לגישה מהירה לתהילים ותפילות עילוי נשמת
2. **בורר שפה** - עם תמיכה ברוסית, עברית ופונטיקה (תעתיק)
3. **אזור גישה מהירה** - כרטיסיות מהירות לכל החלקים המרכזיים באתר
4. **תכונות מרכזיות** - הסבר על תכונות הליבה של האתר
5. **פרסומת לתכונה חדשה** - קידום תפילת תהילים לפי אותיות השם
6. **טופס לתפילה על נפטר** - אפשר להזין שם נפטר ישירות בדף הבית
7. **נתונים מספריים** - להדגיש את היקף האתר
8. **כרטיסים מידע נוספים** - עם קישורים לתכונות כמו חיפוש, קהילה וכו'
9. **פרטים על הקורקטור לתיקון שמות השם** - להבליט את התכונה הייחודית
10. **אודות הפרויקט** - מידע על משמעות השם והמטרה של האתר
11. **רגליים (footer)** - עם קישורים בסיסיים וזכויות יוצרים
12. **ניווט תחתון** - לגישה נוחה בסמארטפונים

גם הוספתי:
- חלונות מודל (modal) עבור חיפוש ומידע נוסף על הקורקטור
- תמיכה במצב כהה שנשמר בלוקל סטורג'
- מבנה תגובי (responsive) שמתאים למכשירים ניידים ומחשבים
- קוד JavaScript בסיסי שמטפל באינטראקציות על הדף

כך האתר מחבר בין כל הרכיבים שיצרנו:
1. לוח שנה עברי עם תאריכי יארצייט
2. מערכת ניהול הקדשות 
3. דף הגדרות מתקדם
4. דף תוצאות תיקוני טקסט
5. עמודי התוכן הקיימים (תהילים, תפילות, תיקון טקסט וכו')

האם יש עוד משהו שתרצה שאוסיף או אשפר באתר המשולב?<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Тикун Ха-Шем - Платформа для молитв и псалмов</title>
  <style>
    /* бסיס */
    @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=PT+Serif:wght@400;700&family=Frank+Ruhl+Libre:wght@400;700&display=swap');
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    :root {
      --primary: #4361ee;
      --primary-light: #4895ef;
      --primary-dark: #3a56d4;
      --secondary: #10b981;
      --background: #f8f9fa;
      --card: #ffffff;
      --text: #212529;
      --text-light: #6c757d;
      --border: #dee2e6;
      --shadow-sm: 0 2px 8px rgba(0,0,0,0.05);
      --shadow-md: 0 4px 12px rgba(0,0,0,0.08);
      --radius-sm: 6px;
      --radius: 12px;
      --radius-lg: 20px;
      --header-height: 70px;
      --bottom-nav-height: 65px;
      --content-padding: 16px;
      --base-font-size: 16px;
      --hebrew-font: 'Frank Ruhl Libre', serif;
      --russian-font: 'PT Serif', serif;
    }
    
    [data-theme="dark"] {
      --primary: #4895ef;
      --primary-light: #4361ee;
      --primary-dark: #3a56d4;
      --secondary: #10b981;
      --background: #121212;
      --card: #1e1e1e;
      --text: #e0e0e0;
      --text-light: #a0a0a0;
      --border: #2d2d2d;
      --shadow-sm: 0 2px 8px rgba(0,0,0,0.2);
      --shadow-md: 0 4px 12px rgba(0,0,0,0.25);
    }
    
    body {
      font-family: 'Roboto', sans-serif;
      background-color: var(--background);
      color: var(--text);
      line-height: 1.5;
      font-size: var(--base-font-size);
      padding-bottom: var(--bottom-nav-height);
      padding-top: var(--header-height);
      transition: background-color 0.3s, color 0.3s;
    }
    
    h1, h2, h3, h4, h5, h6 {
      font-weight: 700;
      line-height: 1.3;
    }
    
    a {
      text-decoration: none;
      color: inherit;
    }
    
    /* כותרת */
    .header {
      position: fixed;
      top: 0;
      right: 0;
      left: 0;
      height: var(--header-height);
      background-color: var(--card);
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 var(--content-padding);
      box-shadow: var(--shadow-sm);
      z-index: 100;
      transition: background-color 0.3s;
    }
    
    .header-title {
      font-weight: 700;
      font-size: 20px;
    }
    
    .header-actions {
      display: flex;
      gap: 12px;
    }
    
    .icon-btn {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background-color: var(--background);
      color: var(--text);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      border: none;
      cursor: pointer;
      transition: background-color 0.2s;
    }
    
    .icon-btn:hover {
      background-color: var(--primary-light);
      color: white;
    }
    
    /* תוכן */
    .container {
      padding: var(--content-padding);
      max-width: 1200px;
      margin: 0 auto;
    }
    
    /* חלק גיבור */
    .hero {
      background-color: var(--primary);
      color: white;
      padding: 40px var(--content-padding);
      border-radius: var(--radius);
      margin-bottom: 30px;
      text-align: center;
      position: relative;
      overflow: hidden;
      background-image: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    }
    
    .hero::before {
      content: '';
      position: absolute;
      top: -10%;
      right: -10%;
      width: 200px;
      height: 200px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.1);
      z-index: 0;
    }
    
    .hero::after {
      content: '';
      position: absolute;
      bottom: -10%;
      left: -10%;
      width: 150px;
      height: 150px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.1);
      z-index: 0;
    }
    
    .hero-content {
      position: relative;
      z-index: 1;
    }
    
    .hero-title {
      font-size: 32px;
      font-weight: 700;
      margin-bottom: 16px;
    }
    
    .hero-subtitle {
      font-size: 18px;
      margin-bottom: 24px;
      opacity: 0.9;
    }
    
    .hebrew-text {
      font-family: var(--hebrew-font);
      direction: rtl;
    }
    
    /* כפתורים */
    .button {
      display: inline-block;
      padding: 12px 24px;
      border-radius: var(--radius-sm);
      font-weight: 600;
      font-size: 16px;
      text-align: center;
      cursor: pointer;
      transition: all 0.2s;
      border: none;
    }
    
    .button-primary {
      background-color: white;
      color: var(--primary);
    }
    
    .button-primary:hover {
      background-color: rgba(255, 255, 255, 0.9);
      transform: translateY(-2px);
    }
    
    .button-outline {
      background-color: transparent;
      color: white;
      border: 2px solid white;
    }
    
    .button-outline:hover {
      background-color: rgba(255, 255, 255, 0.1);
      transform: translateY(-2px);
    }
    
    .button-group {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      justify-content: center;
    }
    
    /* רכיבי גישה מהירה */
    .quick-access {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 16px;
      margin-bottom: 30px;
    }
    
    @media (min-width: 768px) {
      .quick-access {
        grid-template-columns: repeat(4, 1fr);
      }
    }
    
    .quick-access-card {
      background-color: var(--card);
      border-radius: var(--radius);
      padding: 20px;
      text-align: center;
      box-shadow: var(--shadow-sm);
      transition: transform 0.2s, box-shadow 0.2s;
      cursor: pointer;
    }
    
    .quick-access-card:hover {
      transform: translateY(-5px);
      box-shadow: var(--shadow-md);
    }
    
    .quick-access-icon {
      font-size: 32px;
      margin-bottom: 12px;
      color: var(--primary);
    }
    
    .quick-access-title {
      font-weight: 600;
      margin-bottom: 8px;
    }
    
    .quick-access-desc {
      font-size: 14px;
      color: var(--text-light);
    }
    
    /* כרטיסיות תכונות */
    .features {
      margin-bottom: 30px;
    }
    
    .section-title {
      font-size: 24px;
      margin-bottom: 20px;
      text-align: center;
    }
    
    .feature-cards {
      display: grid;
      grid-template-columns: 1fr;
      gap: 20px;
    }
    
    @media (min-width: 768px) {
      .feature-cards {
        grid-template-columns: repeat(3, 1fr);
      }
    }
    
    .feature-card {
      background-color: var(--card);
      border-radius: var(--radius);
      padding: 24px;
      box-shadow: var(--shadow-sm);
      transition: transform 0.2s, box-shadow 0.2s;
      position: relative;
      overflow: hidden;
    }
    
    .feature-card:hover {
      transform: translateY(-5px);
      box-shadow: var(--shadow-md);
    }
    
    .feature-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 5px;
      background-color: var(--primary);
    }
    
    .feature-icon {
      width: 60px;
      height: 60px;
      background-color: rgba(67, 97, 238, 0.1);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 28px;
      color: var(--primary);
      margin-bottom: 16px;
    }
    
    .feature-title {
      font-size: 18px;
      margin-bottom: 12px;
    }
    
    .feature-desc {
      color: var(--text-light);
      margin-bottom: 16px;
    }
    
    .feature-link {
      color: var(--primary);
      font-weight: 500;
      display: inline-block;
    }
    
    /* נתונים מספריים */
    .stats {
      background-color: var(--card);
      border-radius: var(--radius);
      padding: 30px;
      margin-bottom: 30px;
      box-shadow: var(--shadow-sm);
      text-align: center;
    }
    
    .stats-title {
      font-size: 24px;
      margin-bottom: 24px;
    }
    
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
    }
    
    @media (min-width: 768px) {
      .stats-grid {
        grid-template-columns: repeat(4, 1fr);
      }
    }
    
    .stat-item {
      padding: 16px;
    }
    
    .stat-value {
      font-size: 36px;
      font-weight: 700;
      color: var(--primary);
      margin-bottom: 8px;
    }
    
    .stat-label {
      font-size: 15px;
      color: var(--text-light);
    }
    
    /* כרטיסים קטנים */
    .cards-row {
      display: grid;
      grid-template-columns: 1fr;
      gap: 20px;
      margin-bottom: 30px;
    }
    
    @media (min-width: 768px) {
      .cards-row {
        grid-template-columns: repeat(2, 1fr);
      }
    }
    
    .small-card {
      background-color: var(--card);
      border-radius: var(--radius);
      padding: 24px;
      box-shadow: var(--shadow-sm);
      display: flex;
      align-items: flex-start;
      gap: 16px;
      transition: transform 0.2s, box-shadow 0.2s;
    }
    
    .small-card:hover {
      transform: translateY(-3px);
      box-shadow: var(--shadow-md);
    }
    
    .small-card-icon {
      width: 50px;
      height: 50px;
      background-color: rgba(67, 97, 238, 0.1);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      color: var(--primary);
      flex-shrink: 0;
    }
    
    .small-card-content {
      flex: 1;
    }
    
    .small-card-title {
      font-size: 18px;
      margin-bottom: 8px;
    }
    
    .small-card-desc {
      font-size: 14px;
      color: var(--text-light);
      margin-bottom: 12px;
    }
    
    .small-card-link {
      color: var(--primary);
      font-weight: 500;
      font-size: 14px;
    }
    
    /* טפסים */
    .form-card {
      background-color: var(--card);
      border-radius: var(--radius);
      padding: 24px;
      margin-bottom: 30px;
      box-shadow: var(--shadow-sm);
    }
    
    .form-title {
      font-size: 20px;
      margin-bottom: 16px;
      text-align: center;
    }
    
    .form-desc {
      text-align: center;
      color: var(--text-light);
      margin-bottom: 24px;
    }
    
    .form-group {
      margin-bottom: 16px;
    }
    
    .form-label {
      display: block;
      margin-bottom: 8px;
      font-weight: 500;
    }
    
    .form-control {
      width: 100%;
      padding: 12px 16px;
      border: 1px solid var(--border);
      border-radius: var(--radius-sm);
      font-family: inherit;
      font-size: inherit;
      background-color: var(--card);
      color: var(--text);
      transition: border-color 0.2s;
    }
    
    .form-control:focus {
      outline: none;
      border-color: var(--primary);
    }
    
    .form-button {
      width: 100%;
      padding: 14px;
      background-color: var(--primary);
      color: white;
      border: none;
      border-radius: var(--radius-sm);
      font-weight: 600;
      cursor: pointer;
      transition: background-color 0.2s;
      margin-top: 8px;
    }
    
    .form-button:hover {
      background-color: var(--primary-dark);
    }
    
    /* בורר שפה */
    .language-bar {
      display: flex;
      background-color: var(--card);
      border-radius: var(--radius);
      overflow: hidden;
      margin-bottom: 20px;
      box-shadow: var(--shadow-sm);
    }
    
    .language-option {
      flex: 1;
      padding: 12px;
      text-align: center;
      cursor: pointer;
      font-weight: 500;
      transition: background-color 0.2s;
    }
    
    .language-option.active {
      background-color: var(--primary);
      color: white;
    }
    
    /* פרסומות ותזכורות */
    .promo-card {
      background-color: var(--secondary);
      color: white;
      border-radius: var(--radius);
      padding: 24px;
      margin-bottom: 30px;
      position: relative;
      overflow: hidden;
    }
    
    .promo-content {
      position: relative;
      z-index: 1;
    }
    
    .promo-title {
      font-size: 22px;
      margin-bottom: 12px;
    }
    
    .promo-desc {
      opacity: 0.9;
      margin-bottom: 16px;
    }
    
    .promo-button {
      display: inline-block;
      padding: 10px 20px;
      background-color: white;
      color: var(--secondary);
      border-radius: var(--radius-sm);
      font-weight: 600;
      font-size: 14px;
    }
    
    .promo-pattern {
      position: absolute;
      top: 0;
      right: 0;
      width: 150px;
      height: 150px;
      opacity: 0.1;
      background-image: radial-gradient(circle, white 2px, transparent 3px);
      background-size: 20px 20px;
    }
    
    /* ניווט תחתון */
    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      height: var(--bottom-nav-height);
      background-color: var(--card);
      display: flex;
      justify-content: space-around;
      align-items: center;
      box-shadow: 0 -2px 8px rgba(0,0,0,0.08);
      z-index: 100;
      transition: background-color 0.3s;
    }
    
    .bottom-nav-item {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 4px;
      color: var(--text-light);
      transition: color 0.2s;
      padding: 8px 0;
      text-decoration: none;
    }
    
    .bottom-nav-item.active {
      color: var(--primary);
    }
    
    .bottom-nav-icon {
      font-size: 22px;
    }
    
    .bottom-nav-label {
      font-size: 12px;
      font-weight: 500;
    }
    
    /* רגליים */
    .footer {
      text-align: center;
      padding: 20px;
      color: var(--text-light);
      font-size: 14px;
      margin-bottom: var(--bottom-nav-height);
    }
    
    .footer-links {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-bottom: 16px;
    }
    
    .footer-link {
      color: var(--text-light);
      transition: color 0.2s;
    }
    
    .footer-link:hover {
      color: var(--primary);
    }
    
    /* מחשיך מסך */
    .screen-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: rgba(0, 0, 0, 0.6);
      z-index: 150;
      display: none;
      opacity: 0;
      transition: opacity 0.3s;
    }
    
    .screen-overlay.active {
      display: block;
      opacity: 1;
    }
    
    /* מודל / תיבת דו-שיח */
    .modal {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) scale(0.9);
      background-color: var(--card);
      border-radius: var(--radius);
      width: 90%;
      max-width: 500px;
      z-index: 200;
      display: none;
      opacity: 0;
      transition: transform 0.3s, opacity 0.3s;
    }
    
    .modal.active {
      display: block;
      opacity: 1;
      transform: translate(-50%, -50%) scale(1);
    }
    
    .modal-header {
      padding: 16px 20px;
      border-bottom: 1px solid var(--border);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .modal-title {
      font-weight: 600;
      font-size: 18px;
    }
    
    .modal-close {
      background: none;
      border: none;
      font-size: 24px;
      color: var(--text-light);
      cursor: pointer;
    }
    
    .modal-body {
      padding: 20px;
      max-height: 60vh;
      overflow-y: auto;
    }
    
    .modal-footer {
      padding: 16px 20px;
      border-top: 1px solid var(--border);
      display: flex;
      justify-content: flex-end;
      gap: 12px;
    }
    
    /* חיווי טעינה */
    .loading-indicator {
      display: inline-block;
      width: 30px;
      height: 30px;
      border: 3px solid rgba(67, 97, 238, 0.2);
      border-radius: 50%;
      border-top-color: var(--primary);
      animation: spin 1s ease-in-out infinite;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }
    
    @keyframes spin {
      to { transform: translate(-50%, -50%) rotate(360deg); }
    }
  </style>
</head>
<body>
  <!-- כותרת -->
  <header class="header">
    <div class="header-title">Тикун Ха-Шем</div>
    <div class="header-actions">
      <button class="icon-btn" id="language-toggle">🌐</button>
      <button class="icon-btn" id="theme-toggle">🌙</button>
      <a href="settings.html" class="icon-btn">⚙️</a>
    </div>
  </header>
  
  <!-- תוכן -->
  <div class="container">
    <!-- גיבור -->
    <div class="hero">
      <div class="hero-content">
        <h1 class="hero-title">Тикун Ха-Шем</h1>
        <p class="hero-subtitle">Платформа для молитв, псалмов и еврейских текстов с уважением к святым именам</p>
        <div class="hero-subtitle hebrew-text">תיקון השם - קריאת תהילים ותפילות בקדושה</div>
        <div class="button-group">
          <a href="tehilim.html" class="button button-primary">Начать чтение Техилим</a>
          <a href="memorial.html" class="button button-outline">Молитвы за усопших</a>
        </div>
      </div>
    </div>
    
    <!-- מידע נוסף - כרטיסים קטנים -->
    <div class="cards-row">
      <div class="small-card">
        <div class="small-card-icon">🔍</div>
        <div class="small-card-content">
          <h3 class="small-card-title">Поиск по содержанию</h3>
          <p class="small-card-desc">Ищите конкретные фразы или слова в псалмах и молитвах. Находите тексты соответствующие вашим потребностям.</p>
          <a href="#" class="small-card-link" id="open-search-modal">Искать текст</a>
        </div>
      </div>
      <div class="small-card">
        <div class="small-card-icon">👥</div>
        <div class="small-card-content">
          <h3 class="small-card-title">Сообщество чтецов</h3>
          <p class="small-card-desc">Присоединяйтесь к группам, где псалмы читаются совместно для особых целей: выздоровление больных, успех и другие нужды.</p>
          <a href="tehilim-mobile-community.html" class="small-card-link">Присоединиться</a>
        </div>
      </div>
      <div class="small-card">
        <div class="small-card-icon">📱</div>
        <div class="small-card-content">
          <h3 class="small-card-title">Мобильное приложение</h3>
          <p class="small-card-desc">Скачайте наше приложение для iOS и Android, чтобы иметь доступ к техилим и молитвам даже без интернета.</p>
          <a href="#" class="small-card-link">Скоро будет доступно</a>
        </div>
      </div>
      <div class="small-card">
        <div class="small-card-icon">📚</div>
        <div class="small-card-content">
          <h3 class="small-card-title">Библиотека текстов</h3>
          <p class="small-card-desc">Исследуйте обширную коллекцию еврейских текстов: благословения, праздничные молитвы и многое другое.</p>
          <a href="#" class="small-card-link">Открыть библиотеку</a>
        </div>
      </div>
    </div>
    
    <!-- הסבר על הקורקטור -->
    <div class="feature-card" style="margin-bottom: 30px;">
      <div class="feature-icon">⚡</div>
      <h3 class="feature-title">Корректор текста с именами Всевышнего</h3>
      <p class="feature-desc">Наш уникальный инструмент автоматически исправляет имена Всевышнего в текстах в соответствии с еврейской традицией. Загрузите свой текст и получите корректную версию для печати или публикации в интернете.</p>
      
      <div style="display: flex; gap: 10px; margin-top: 20px;">
        <a href="correct-text.html" class="button" style="flex: 1; background-color: var(--primary); color: white; text-align: center;">Исправить текст</a>
        <a href="#" class="button" style="flex: 1; background-color: var(--background); text-align: center;" id="show-correction-info">Узнать больше</a>
      </div>
    </div>
    
    <!-- אודות -->
    <div class="form-card">
      <h3 class="form-title">О проекте Тикун Ха-Шем</h3>
      <p style="text-align: center; margin-bottom: 20px;">
        <span class="hebrew-text" style="font-size: 24px; display: block; margin-bottom: 10px;">תיקון השם</span>
        Проект "Тикун Ха-Шем" создан для того, чтобы помочь русскоязычным евреям читать псалмы и молитвы с соблюдением святости имен Всевышнего.
      </p>
      <p style="text-align: justify; margin-bottom: 15px;">
        Название проекта "Тикун Ха-Шем" (תיקון השם) имеет двойное значение: "исправление имени" и "возвышение души". Мы стремимся предоставить инструменты для правильного написания и произношения священных имен, а также для чтения молитв, возвышающих души усопших.
      </p>
      <p style="text-align: justify;">
        Вы можете читать тексты на иврите, в русском переводе или в фонетической транскрипции – как вам удобнее, сохраняя при этом должное уважение к святости текстов.
      </p>
    </div>
  </div>
  
  <!-- רגליים -->
  <footer class="footer">
    <div class="footer-links">
      <a href="#" class="footer-link">О нас</a>
      <a href="#" class="footer-link">Помощь</a>
      <a href="#" class="footer-link">Контакты</a>
      <a href="#" class="footer-link">Политика конфиденциальности</a>
    </div>
    <div>© 2025 Тикун Ха-Шем. Все права защищены.</div>
  </footer>
  
  <!-- ניווט תחתון -->
  <nav class="bottom-nav">
    <a href="#" class="bottom-nav-item active">
      <div class="bottom-nav-icon">🏠</div>
      <div class="bottom-nav-label">Главная</div>
    </a>
    <a href="tehilim.html" class="bottom-nav-item">
      <div class="bottom-nav-icon">📖</div>
      <div class="bottom-nav-label">Техилим</div>
    </a>
    <a href="memorial.html" class="bottom-nav-item">
      <div class="bottom-nav-icon">🕯️</div>
      <div class="bottom-nav-label">За усопших</div>
    </a>
    <a href="siddur.html" class="bottom-nav-item">
      <div class="bottom-nav-icon">📝</div>
      <div class="bottom-nav-label">Молитвенник</div>
    </a>
  </nav>
  
  <!-- מסך כהה -->
  <div class="screen-overlay" id="screen-overlay"></div>
  
  <!-- מודל חיפוש -->
  <div class="modal" id="search-modal">
    <div class="modal-header">
      <div class="modal-title">Поиск текста</div>
      <button class="modal-close">&times;</button>
    </div>
    <div class="modal-body">
      <div class="form-group">
        <label class="form-label">Что вы хотите найти?</label>
        <input type="text" class="form-control" placeholder="Введите слово или фразу...">
      </div>
      <div class="form-group">
        <label class="form-label">Тип текста</label>
        <select class="form-control">
          <option>Все тексты</option>
          <option>Техилим (Псалмы)</option>
          <option>Молитвы</option>
          <option>Благословения</option>
        </select>
      </div>
      <div class="form-group">
        <label class="form-label">Язык</label>
        <select class="form-control">
          <option>Русский</option>
          <option>Иврит</option>
          <option>Транслитерация</option>
        </select>
      </div>
    </div>
    <div class="modal-footer">
      <button class="button" style="background-color: var(--background); color: var(--text);">Отмена</button>
      <button class="button" style="background-color: var(--primary); color: white;">Искать</button>
    </div>
  </div>
  
  <!-- מודל מידע על תיקון -->
  <div class="modal" id="correction-info-modal">
    <div class="modal-header">
      <div class="modal-title">О корректоре имен Всевышнего</div>
      <button class="modal-close">&times;</button>
    </div>
    <div class="modal-body">
      <p style="margin-bottom: 15px;">
        В еврейской традиции имена Всевышнего обладают святостью и требуют особого уважения. В печатных и электронных материалах принято заменять полные имена особыми формами записи.
      </p>
      
      <h4 style="font-weight: 600; margin-bottom: 10px;">Примеры правильной замены:</h4>
      <ul style="list-style: none; margin-bottom: 15px;">
        <li style="margin-bottom: 5px;">✓ <strong>Б-г</strong> вместо "Бог"</li>
        <li style="margin-bottom: 5px;">✓ <strong>Г-сподь</strong> вместо "Господь"</li>
        <li style="margin-bottom: 5px;">✓ <strong>Вс-вышний</strong> вместо "Всевышний"</li>
        <li style="margin-bottom: 5px;">✓ <strong>ה'</strong> (буква "хей" с апострофом) вместо полного написания</li>
      </ul>
      
      <p style="margin-bottom: 15px;">
        Наш корректор автоматически обнаруживает и исправляет все имена Всевышнего в русских текстах, что особенно важно при подготовке молитвенников, статей или публикаций в интернете.
      </p>
      
      <h4 style="font-weight: 600; margin-bottom: 10px;">Варианты исправления:</h4>
      <ul style="list-style: none; margin-bottom: 15px;">
        <li style="margin-bottom: 5px;">• <strong>С дефисом</strong>: классический метод (Б-г)</li>
        <li style="margin-bottom: 5px;">• <strong>Буквой иврита</strong>: замена на ה' (хей с апострофом)</li>
        <li style="margin-bottom: 5px;">• <strong>Словом</strong>: замена на альтернативные названия (Вс-вышний)</li>
      </ul>
    </div>
    <div class="modal-footer">
      <button class="button" style="background-color: var(--background); color: var(--text);">Закрыть</button>
      <a href="correct-text.html" class="button" style="background-color: var(--primary); color: white;">Перейти к корректору</a>
    </div>
  </div>
  
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // טיפול בהחלפת שפה
      const languageOptions = document.querySelectorAll('.language-option');
      
      // פונקציה לבדיקת האם localStorage זמין
      function isLocalStorageAvailable() {
        try {
          const test = 'test';
          localStorage.setItem(test, test);
          localStorage.removeItem(test);
          return true;
        } catch(e) {
          return false;
        }
      }
      
      // משתנה גלובלי לשמירת הגדרות אם localStorage לא זמין
      const tempSettings = {
        preferredLanguage: 'ru',
        theme: 'light'
      };
      
      // פונקציה מאובטחת לשמירת הגדרות
      function saveSetting(key, value) {
        if (isLocalStorageAvailable()) {
          localStorage.setItem(key, value);
        } else {
          tempSettings[key] = value;
        }
      }
      
      // פונקציה מאובטחת לטעינת הגדרות
      function loadSetting(key, defaultValue) {
        if (isLocalStorageAvailable()) {
          return localStorage.getItem(key) || defaultValue;
        } else {
          return tempSettings[key] || defaultValue;
        }
      }
      
      languageOptions.forEach(option => {
        option.addEventListener('click', function() {
          // שינוי האפשרות הפעילה
          languageOptions.forEach(opt => opt.classList.remove('active'));
          this.classList.add('active');
          
          // שמירת השפה הנבחרת
          const selectedLang = this.dataset.lang;
          saveSetting('preferredLanguage', selectedLang);
          
          // במימוש אמיתי, כאן היה קוד להחלפת שפה באתר
          console.log('Выбран язык:', selectedLang);
        });
      });
      
      // טעינת השפה המועדפת השמורה
      const savedLang = loadSetting('preferredLanguage', 'ru');
      languageOptions.forEach(opt => {
        if (opt.dataset.lang === savedLang) {
          opt.click();
        }
      });
      
      // טיפול במצב כהה
      const themeToggleBtn = document.getElementById('theme-toggle');
      const isDarkMode = loadSetting('theme', 'light') === 'dark';
      
      if (isDarkMode) {
        document.body.setAttribute('data-theme', 'dark');
        themeToggleBtn.textContent = '☀️';
      }
      
      themeToggleBtn.addEventListener('click', function() {
        if (document.body.getAttribute('data-theme') === 'dark') {
          document.body.removeAttribute('data-theme');
          saveSetting('theme', 'light');
          this.textContent = '🌙';
        } else {
          document.body.setAttribute('data-theme', 'dark');
          saveSetting('theme', 'dark');
          this.textContent = '☀️';
        }
      });
      
      // טיפול בטופס תפילה לנפטר
      document.getElementById('generate-prayer').addEventListener('click', function() {
        const deceasedName = document.getElementById('deceased-name').value.trim();
        const motherName = document.getElementById('mother-name').value.trim();
        
        if (!deceasedName) {
          alert('Пожалуйста, введите имя усопшего');
          return;
        }
        
        // הפניה לעמוד תהילים 119 עם פרמטרים בכתובת
        window.location.href = 'psalm119.html?name=' + encodeURIComponent(deceasedName) + 
                             '&mother=' + encodeURIComponent(motherName);
      });
      
      // טיפול במודלים
      const screenOverlay = document.getElementById('screen-overlay');
      const searchModal = document.getElementById('search-modal');
      const correctionInfoModal = document.getElementById('correction-info-modal');
      
      // פתיחה וסגירה של מודל חיפוש
      document.getElementById('open-search-modal').addEventListener('click', function(e) {
        e.preventDefault();
        searchModal.classList.add('active');
        screenOverlay.classList.add('active');
      });
      
      // פתיחה וסגירה של מודל מידע על תיקון
      document.getElementById('show-correction-info').addEventListener('click', function(e) {
        e.preventDefault();
        correctionInfoModal.classList.add('active');
        screenOverlay.classList.add('active');
      });
      
      // סגירת כל המודלים בלחיצה על רקע שחור
      screenOverlay.addEventListener('click', function() {
        document.querySelectorAll('.modal').forEach(modal => {
          modal.classList.remove('active');
        });
        screenOverlay.classList.remove('active');
      });
      
      // סגירת מודל בלחיצה על כפתור סגירה
      document.querySelectorAll('.modal-close').forEach(closeBtn => {
        closeBtn.addEventListener('click', function() {
          this.closest('.modal').classList.remove('active');
          screenOverlay.classList.remove('active');
        });
      });
      
      // סגירת מודל בלחיצה על כפתור ביטול
      document.querySelectorAll('.modal-footer .button').forEach(button => {
        if (button.textContent.trim() === 'Отмена' || button.textContent.trim() === 'Закрыть') {
          button.addEventListener('click', function() {
            this.closest('.modal').classList.remove('active');
            screenOverlay.classList.remove('active');
          });
        }
      });
    });
  </script>
</body>
</html>
    
    <!-- בורר שפה -->
    <div class="language-bar">
      <div class="language-option active" data-lang="ru">Русский</div>
      <div class="language-option" data-lang="he">עברית</div>
      <div class="language-option" data-lang="phonetic">Фонетика</div>
    </div>
    
    <!-- גישה מהירה -->
    <div class="quick-access">
      <a href="tehilim.html" class="quick-access-card">
        <div class="quick-access-icon">📖</div>
        <div class="quick-access-title">Техилим</div>
        <div class="quick-access-desc">Псалмы Давида</div>
      </a>
      <a href="siddur.html" class="quick-access-card">
        <div class="quick-access-icon">📝</div>
        <div class="quick-access-title">Молитвенник</div>
        <div class="quick-access-desc">Сидур на каждый день</div>
      </a>
      <a href="memorial.html" class="quick-access-card">
        <div class="quick-access-icon">🕯️</div>
        <div class="quick-access-title">За усопших</div>
        <div class="quick-access-desc">Йорцайт и молитвы</div>
      </a>
      <a href="correct-text.html" class="quick-access-card">
        <div class="quick-access-icon">✏️</div>
        <div class="quick-access-title">Исправление</div>
        <div class="quick-access-desc">Текст с именами Б-га</div>
      </a>
    </div>
    
    <!-- תכונות עיקריות -->
    <section class="features">
      <h2 class="section-title">Особенности нашей платформы</h2>
      <div class="feature-cards">
        <div class="feature-card">
          <div class="feature-icon">📖</div>
          <h3 class="feature-title">Псалмы на трех языках</h3>
          <p class="feature-desc">Читайте Техилим на иврите, русском или с транслитерацией в удобном и красивом интерфейсе.</p>
          <a href="tehilim.html" class="feature-link">Открыть Техилим →</a>
        </div>
        <div class="feature-card">
          <div class="feature-icon">✏️</div>
          <h3 class="feature-title">Исправление имён Всевышнего</h3>
          <p class="feature-desc">Автоматическое исправление текстов с корректной заменой имен Всевышнего согласно еврейской традиции.</p>
          <a href="correct-text.html" class="feature-link">Исправить текст →</a>
        </div>
        <div class="feature-card">
          <div class="feature-icon">🕯️</div>
          <h3 class="feature-title">Йорцайт-календарь</h3>
          <p class="feature-desc">Управляйте годовщинами смерти близких, получайте напоминания и читайте соответствующие молитвы.</p>
          <a href="memorial.html" class="feature-link">Перейти к календарю →</a>
        </div>
      </div>
    </section>
    
    <!-- פרסומת / קידום -->
    <div class="promo-card">
      <div class="promo-pattern"></div>
      <div class="promo-content">
        <h3 class="promo-title">Новая функция: Молитва по буквам имени</h3>
        <p class="promo-desc">Псалом 119 содержит стихи для каждой буквы еврейского алфавита. Теперь вы можете выбрать стихи, соответствующие буквам имени усопшего.</p>
        <a href="psalm119.html" class="promo-button">Попробовать</a>
      </div>
    </div>
    
    <!-- טפסים עבור נפטרים -->
    <div class="form-card">
      <h3 class="form-title">Молитва за усопшего</h3>
      <p class="form-desc">Введите имя усопшего, чтобы получить специальную подборку псалмов</p>
      
      <div class="form-group">
        <label class="form-label">Имя усопшего (на иврите):</label>
        <input type="text" class="form-control" id="deceased-name" placeholder="שם הנפטר" dir="rtl">
      </div>
      <div class="form-group">
        <label class="form-label">Имя матери усопшего (на иврите):</label>
        <input type="text" class="form-control" id="mother-name" placeholder="שם האם" dir="rtl">
      </div>
      <button class="form-button" id="generate-prayer">Получить псалмы для чтения</button>
    </div>
    
    <!-- נתונים מספריים -->
    <div class="stats">
      <h3 class="stats-title">Наша библиотека</h3>
      <div class="stats-grid">
        <div class="stat-item">
          <div class="stat-value">150</div>
          <div class="stat-label">Псалмов</div>
        </div>
        <div class="stat-item">
          <div class="stat-value">50+</div>
          <div class="stat-label">Молитв</div>
        </div>
        <div class="stat-item">
          <div class="stat-value">3</div>
          <div class="stat-label">Языка</div>
        </div>
        <div class="stat-item">
          <div class="stat-value">10K+</div>
          <div class="stat-label">Пользователей</div>
        </div>
